{"config":{"lang":["en","ru"],"separator":"[\\s\\u200b\\-_,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Python Library for TrueConf Chatbot Connector","text":"<p>Welcome to the documentation of python-trueconf-bot \u2014 a library that allows you to create and manage chatbots for the TrueConf platform using WebSocket and asyncio.</p> <p>This library is designed to simplify the development of chatbots by providing ready-made tools for connecting, processing incoming events, and sending responses. With it, you can create bots for automating tasks, integrating with external services, and enhancing communication within your organization.</p>"},{"location":"#key-features","title":"Key features","text":"<ul> <li>Asynchronous operation using asyncio</li> <li>Support for WebSocket connections</li> <li>Convenient routing of incoming messages</li> <li>Built-in filters for processing different types of updates</li> <li>Easy integration with external Python libraries</li> </ul>"},{"location":"#installation","title":"Installation","text":""},{"location":"#requirements","title":"Requirements","text":"<ul> <li>Python 3.10+</li> <li>Installed dependencies: <code>websockets</code>, <code>httpx</code>, <code>mashumaro</code>, <code>pillow</code>, <code>aiofiles</code>, <code>magic-filter</code></li> <li>It is recommended to use virtualenv or poetry for dependency isolation.</li> </ul>"},{"location":"#installation-using-pip","title":"Installation using pip","text":"<pre><code>pip install python-trueconf-bot\n</code></pre>"},{"location":"#comparison-with-aiogram","title":"Comparison with aiogram","text":"Feature aiogram (Telegram) python-trueconf-bot (TrueConf) Asynchronous asyncio asyncio Routing decorators <code>@router.message(...)</code> <code>@router.message(...)</code> Message filtering <code>F.text</code>, <code>F.photo</code>, <code>F.document</code> <code>F.text</code>, <code>F.photo</code>, <code>F.document</code> Magic-filter \u2705 \u2705 Aliases (shortcuts) <code>message.answer()</code>, <code>message.reply()</code> <code>message.answer()</code>, <code>message.reply()</code> Bot initialization <code>Bot(token=\"...\")</code> <code>Bot(server, token=\"...\")</code> or <code>Bot.from_credentials(server, login, password)</code> JSON \u2192 Python Pydantic models Mashumaro dataclasses Transport HTTPS + long polling / webhook Asynchronous WebSocket Working with files <code>bot.get_file(...)</code> + <code>bot.download_file(...)</code> <code>message.photo.download()</code>, <code>message.document.download()</code>, <code>bot.download_file_by_id(...)</code>"},{"location":"features/","title":"Features","text":""},{"location":"features/#asyncio-based-asynchronous-architecture","title":"Asyncio-based Asynchronous Architecture","text":"<p>The entire system is built using async/await, ensuring high performance and non-blocking operations.</p>"},{"location":"features/#familiar-aiogram-like-design","title":"Familiar aiogram-like Design","text":"<p>Leverages familiar concepts: Router, decorators, shortcuts like message.answer, message.reply, filters, and even magic-filter (F.text, F.document, F.photo).</p>"},{"location":"features/#convenient-handling-of-incoming-events","title":"Convenient Handling of Incoming Events","text":"<p>All incoming JSON payloads are automatically transformed into Python classes (Message, AttachmentContent, UploadingProgress, etc.), making data handling simple and type-safe.</p>"},{"location":"features/#decorators-for-routing","title":"Decorators for Routing","text":"<p>The router enables elegant and structured handling of events:</p> <pre><code>from trueconf import Router, Message\nfrom trueconf.enums import MessageType\nfrom trueconf.filters import F\n\nrouter = Router()\n\n@router.message(F.text.startswith(\"/start\"))\nasync def on_start(msg: Message):\n  await msg.answer(\"Hello! I'm TrueConf bot \ud83d\udc4b\")\n\n@router.message(F.document.mime_type == \"application/pdf\")\nasync def on_pdf(msg: Message):\n  await msg.reply(\"Thanks for the PDF!\")\n</code></pre>"},{"location":"features/#two-connection-options","title":"Two Connection Options","text":"<ol> <li>Using a pre-obtained JWT token:</li> </ol> <pre><code>bot = Bot(server=\"video.example.com\", token=\"...\")\n</code></pre> <ol> <li>Or via login and password authentication:</li> </ol> <pre><code>bot = Bot.from_credentials(server, username, password)\n</code></pre>"},{"location":"features/#aliases-and-shortcuts-in-aiogram-style","title":"Aliases and Shortcuts in aiogram Style","text":"<p>Common methods are available for messages:</p> <pre><code>await msg.answer(\"Text to chat\")\nawait msg.reply(\"Reply to a message\")\nawait msg.copy_to(chat_id=\"other_chat\")\n</code></pre>"},{"location":"features/#multi-bot-support","title":"Multi-Bot Support","text":"<p>You can run multiple bots simultaneously and route events separately for each one.</p>"},{"location":"features/#asynchronous-transport-websocket","title":"Asynchronous Transport \u2014 WebSocket","text":"<p>All communication with the server is handled via WebSocket, which is faster and more efficient than traditional REST requests.</p>"},{"location":"features/#magic-filter-just-like-in-aiogram","title":"Magic-filter, Just Like in aiogram","text":"<p>Exactly the same as in aiogram:</p> <pre><code>@router.message(F.photo)\nasync def on_photo(msg: Message): ...\n\n@router.message(F.document.mime_type.in_([\"application/pdf\", \"application/msword\"]))\nasync def on_doc(msg: Message): ...\n</code></pre>"},{"location":"features/#files-and-uploads","title":"Files and Uploads","text":"<p>Asynchronous file upload and download are supported. Files can be downloaded to a temporary directory or a specified path.</p> <pre><code>path = await bot.download_file_by_id(file_id)\nawait msg.answer(f\"File downloaded to {path}\")\n</code></pre>"},{"location":"features/#full-set-of-public-api-methods","title":"Full Set of Public API Methods","text":"<p>The library implements all core TrueConf API methods: sending messages, uploading/downloading files, polls, conferences, participant management, and more.</p>"},{"location":"release_notes/","title":"List of Changes","text":""},{"location":"release_notes/#110","title":"1.1.0","text":"<p>Added:</p> <ul> <li>New classes for working with files: <code>FSInputFile</code>, <code>BufferedInputFile</code>, <code>URLInputFile</code>. More details can be found in the documentation.</li> <li>Support for displaying message history <code>display_history = True</code> when adding a user to a group chat or channel.</li> <li>Support for request and event for:</li> <li>role changes in a group chat or channel (request, notification);</li> <li>creation of the \u201cFavorites\u201d chat (request, notification).</li> <li>Ability to send files with a caption.</li> <li>Shortcut <code>.save_to_favorites()</code> for quickly saving a message to the \"Favorites\" chat.</li> <li>The asynchronous property <code>await bot.me</code>, which returns the <code>chat_id</code> of the \"Saved Messages\" chat.</li> </ul> <p>Fixed:</p> <ul> <li>Stickers sent via <code>bot.send_sticker()</code> were displayed with a background due to an incorrect MIME type.</li> <li>The method <code>.remove_participant_from_chat()</code> did not work when an incomplete TrueConf ID was specified.</li> <li>Error unpacking the participant list due to an incorrect alias.</li> <li>Sometimes, when obtaining a token using <code>.from_credentials()</code>, a <code>400 Bad Requests</code> error would occur when using a digit password.</li> </ul> <p>Modified:</p> <ul> <li>The <code>bot.server_name</code> property has become asynchronous. Use it as <code>await bot.server_name</code>.</li> </ul>"},{"location":"release_notes/#100","title":"1.0.0","text":"<p>\ud83c\udf89 First Release!</p> <ul> <li>Stable version of the python-trueconf-bot library.</li> <li>Support for all major TrueConf ChatBot API methods.</li> <li>Aliases and keyboard shortcuts in the aiogram style (message.answer, message.reply, etc.).</li> <li>Asynchronous data transmission via the WebSocket protocol.</li> <li>Working with files (sending and uploading).</li> <li>Documentation: trueconf.github.io/python-trueconf-bot/</li> <li>PyPI: pypi.org/project/python-trueconf-bot/</li> </ul>"},{"location":"examples/echo_bot/","title":"Echo bot","text":"<pre><code>import asyncio\nfrom trueconf import Bot, Dispatcher, Router, Message, F, ParseMode\nfrom os import getenv\n\nrouter = Router()\ndp = Dispatcher()\ndp.include_router(router)\n\nTOKEN = getenv(\"TOKEN\")\n\nbot = Bot(server=\"video.example.com\", token=TOKEN, dispatcher=dp)\n\n\n@router.message(F.text)\nasync def echo(msg: Message):\n    await msg.answer(f\"You says: **{msg.text}**\", parse_mode=ParseMode.MARKDOWN)\n\n\nasync def main():\n    await bot.run()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre>"},{"location":"examples/multibot/","title":"Multibot","text":"<p>The TrueConf team has prepared an example that demonstrates the use of four bots at once (all-in-one):</p> <ul> <li>Echo bot</li> <li>Sick-leave bot that forwards messages to an HR group</li> <li>Monitoring bot for external service statistics (TrueConf Server)</li> <li>GPT bot that runs a local LLM model in the background</li> </ul> <p>View repository </p>"},{"location":"learn/enums/","title":"Using enumerations","text":"<p>In the python-trueconf-bot library, many method parameters and object fields are defined through enums (enumerations). This is done for developer convenience and to avoid errors caused by using \"magic strings\" or numeric codes.</p> <p>You can import all enums at once:</p> <pre><code>from trueconf.enums import *\n</code></pre> <p>Or import only the ones you need:</p> <pre><code>from trueconf.enums import ParseMode, FileReadyState\n</code></pre>"},{"location":"learn/enums/#usage-examples","title":"Usage examples","text":""},{"location":"learn/enums/#text-formatting","title":"Text formatting","text":"<pre><code>from trueconf.enums import ParseMode\n\nawait message.answer(\n    \"Hello, *world*!\",\n    parse_mode=ParseMode.MARKDOWN\n)\n</code></pre> <p>Instead of manually typing the string <code>\"Markdown\"</code>, you use <code>ParseMode.MARKDOWN</code>.</p>"},{"location":"learn/enums/#working-with-files","title":"Working with files","text":"<pre><code>from trueconf.enums import FileReadyState\n\ninfo = await bot.get_file_info(file_id=\"abc123\")\n\nif info.ready_state == FileReadyState.READY:\n    await bot.download_file_by_id(info.file_id, \"./downloads\")\nelif info.ready_state == FileReadyState.NOT_AVAILABLE:\n    print(\"File is not available\")\n</code></pre>"},{"location":"learn/enums/#chat-types","title":"Chat types","text":"<pre><code>from trueconf.enums import ChatType\n\nif chat.chat_type == ChatType.GROUP:\n    await message.answer(\"This is a group chat\")\n</code></pre> <p>Thus, <code>enums</code> help you write cleaner and safer code.</p>"},{"location":"learn/files/","title":"Working with Files","text":"<p>TrueConf Chatbot Connector does not impose any restrictions on uploading files to the server. However, starting from version TrueConf Server 5.5.2 and above, the administrator can set limits on the maximum file size and allowable formats (extensions).</p> <p>The python-trueconf-bot library offers convenient tools for file handling, both for sending and uploading. To send a file, use one of the InputFile subclasses, depending on the data source.</p> <p>Three built-in classes are available for file transfer:</p> <ul> <li>FSInputFile \u2014 uploading a file from the local file system</li> <li>BufferedInputFile \u2014 loading from a byte buffer</li> <li>URLInputFile \u2014 uploading a file from a remote URL</li> </ul> <p>All classes are located in the trueconf.types module.</p> <p>You can use these classes in methods:</p> <ul> <li>bot.send_document(...)</li> <li>bot.send_photo(...)</li> <li>bot.send_sticker(...)</li> </ul>"},{"location":"learn/files/#how-to-send-a-file","title":"How to send a file?","text":""},{"location":"learn/files/#fsinputfile","title":"\ud83d\uddc2\ufe0f FSInputFile","text":"<p>It is used for uploading files from the local file system. It is recommended to use this when you have a file path.</p> <pre><code>from trueconf.types import FSInputFile\n\nawait bot.send_document(\n    chat_id=\"a1b2c3d4\",\n    file=FSInputFile(\"docs/report.pdf\"),\n    caption=\"\ud83d\udcc4 Annual report for **2025**\",\n    parse_mode=ParseMode.MARKDOWN\n)\n\nawait bot.send_sticker(\n    chat_id=\"a1b2c3d4\",\n    file=FSInputFile(\"stickers/cat.webp\")\n)\n</code></pre>"},{"location":"learn/files/#bufferedinputfile","title":"\ud83e\udde0 BufferedInputFile","text":"<p>Used when the file is already in memory (for example, received from an API, loaded into RAM, or from a database).</p> <pre><code>from trueconf.types import BufferedInputFile\n\nimage_bytes = open(\"image.jpg\", \"rb\").read()\npreview_bytes = open(\"preview.jpg\", \"rb\").read()\n\nawait bot.send_photo(\n    chat_id=\"a1b2c3d4\",\n    file=BufferedInputFile(\n        file=image_bytes,\n        filename=\"image.jpg\"\n    ),\n    preview=BufferedInputFile(\n        file=preview_bytes,\n        filename=\"preview.jpg\"\n    ),\n    caption=\"This is my photo\"\n)\n</code></pre> <p>The convenient method <code>from_file()</code> is also available:</p> <pre><code>file = BufferedInputFile.from_file(\"archive.zip\")\nawait bot.send_document(chat_id=\"...\", file=file)\n</code></pre>"},{"location":"learn/files/#urlinputfile","title":"\ud83c\udf10 URLInputFile","text":"<p>If the file is available online, you can provide a link, and the bot will download it automatically.</p> <pre><code>from trueconf.types import URLInputFile\n\nfile = URLInputFile(\n    url=\"https://example.com/image.png\",\n    filename=\"image.png\",  # optional \u2014 it will be determined automatically\n)\n</code></pre>"},{"location":"learn/files/#recommendations","title":"Recommendations","text":"<ul> <li>MIME type: determined automatically. If the python-magic package is installed, the MIME type will be calculated based on the file's content (bytes), which is significantly more accurate than determining it by extension. Install it with dependencies as follows:</li> </ul> <pre><code>pip install python-trueconf-bot[python-magic]\n</code></pre> <ul> <li>clone(): each file type supports the <code>.clone()</code> method, which creates a new copy of the object with a different <code>id(object)</code>.</li> </ul>"},{"location":"learn/files/#how-to-download-a-file","title":"How to download a file?","text":"<p>To easily download incoming media files, such as images (<code>message.photo</code>) or documents (<code>message.document</code>), the library provides the shortcut method <code>.download()</code>. This is syntactic sugar over the <code>bot.download_file_by_id(...)</code> method, simplifying the handling of attachments.</p> <p>It is recommended to use <code>.download()</code> because it:</p> <ul> <li>automatically retrieves file_id from the object;</li> <li>uses the current bot instance;</li> <li>minimizes the amount of code.</li> </ul> <pre><code>@router.message(F.document)\nasync def handle_doc(msg: Message):\n    await msg.document.download(dest_path=\"document.pdf\")\n</code></pre> <p>!!! Notes The <code>dest_path</code> can be either relative or absolute.</p> <p>The method <code>download_file_by_id(...)</code> is also available for more flexible control:</p> <pre><code>await bot.download_file_by_id(\n    file_id=msg.document.file_id, \n    dest_path=\"document.pdf\"\n)\n</code></pre>"},{"location":"learn/filters/","title":"Filters","text":"<p>Filters are necessary for routing incoming events (updates) to the correct handlers. The search for a handler always stops at the first match with a set of filters. By default, all handlers have an empty set of filters, so all updates will be passed to the first handler with an empty set of filters. In the current implementation, two main approaches for filtering text messages are available:</p> <ul> <li>Command \u2014 a filter for processing commands in the format /command [arguments].</li> <li>MagicFilter is a universal declarative filter (from the magic-filter library) for event field validation.</li> </ul> <p>These two approaches are often used together: Command checks the command format and extracts arguments, while MagicFilter imposes additional conditions on arguments or other message fields.</p> <p>Tip</p> <p>Below you can find examples of using filters, but if that's not enough, check out examples in the repository.</p>"},{"location":"learn/filters/#command","title":"Command","text":"<p>Command \u2014 a convenient filter for parsing and processing commands in message text.</p> <pre><code>Command(*commands: str | Pattern[str], prefix: str = \"/\", ignore_case: bool = False, magic: MagicFilter | None = None)\n</code></pre> <p>Capabilities</p> <ul> <li>Accept one or more commands: <code>Command(\"start\")</code>, <code>Command(\"info\", \"about\")</code>. </li> <li>Support regular expression patterns: <code>Command(re.compile(r\"echo_\\d+\"))</code>. </li> <li>Support different prefixes (default is <code>/</code>), for example <code>prefix=\"!/\"</code> \u2014 then <code>!cmd</code> and <code>/cmd</code> will be valid. </li> <li>Ignore case for string commands (<code>ignore_case=True</code>). </li> <li>Accept optional <code>magic</code> \u2014 MagicFilter, which additionally validates the <code>CommandObject</code> (see below).</li> </ul> <p>The Command filter operates as follows:</p> <ol> <li>Checks that the message is a <code>Message</code> and that it is of type <code>PLAIN_MESSAGE</code>.</li> <li>Checks if the text begins with the specified prefix (default is <code>/</code>).</li> <li>Splits the string into a command and arguments (if any).</li> <li>Compares the command with the specified ones (including support for <code>re.Pattern</code>).</li> <li>If <code>magic</code> is passed, <code>MagicFilter</code> is applied to the <code>CommandObject</code>.</li> <li>If the <code>magic</code> filter is triggered, it returns a dictionary <code>{\"command\": command_obj}</code>.</li> </ol>"},{"location":"learn/filters/#commandobject","title":"CommandObject","text":"<p>If the filter is triggered, the handler can receive a CommandObject (passed as the <code>command</code> parameter):</p> <pre><code>@dataclass(frozen=True)\nclass CommandObject:\n    prefix: str\n    command: str\n    args: str | None\n    regexp_match: Match[str] | None = None\n    magic_result: Any | None = None\n</code></pre> <p>Fields</p> <ul> <li><code>prefix</code> \u2014 the prefix character (<code>/</code>, <code>!</code>, etc.). </li> <li><code>command</code> \u2014 the command name without the prefix. </li> <li><code>args</code> \u2014 the argument string (everything after the space). </li> <li><code>regexp_match</code> \u2014 the result of <code>re.Match</code> if the command was specified as a regular expression. </li> <li><code>magic_result</code> \u2014 optional data returned by <code>magic</code> (if applicable).</li> </ul>"},{"location":"learn/filters/#examples","title":"Examples","text":"<p>Basic handler:</p> <pre><code>@r.message(Command(\"ping\"))\nasync def handle_ping(message: Message):\n    await bot.send_message(chat_id=message.chat_id, text=\"pong\")\n</code></pre> <p>Multiple commands:</p> <pre><code>@r.message(Command(\"info\", \"about\", \"whoami\"))\nasync def handle_info(message: Message, command: CommandObject):\n    await bot.send_message(chat_id=message.chat_id, text=f\"Used /{command.command}\")\n</code></pre> <p>Command with prefix:</p> <pre><code>@r.message(Command(re.compile(r\"echo_\\d+\")))\nasync def handle_echo_numbered(message: Message, command: CommandObject):\n    await bot.send_message(chat_id=message.chat_id, text=f\"Echo: {command.command} {command.args or ''}\")\n</code></pre>"},{"location":"learn/filters/#magicfilter","title":"MagicFilter","text":"<p>MagicFilter is a declarative, chainable filter from the magic-filter package. It allows you to express checks on event fields using chains and operators. Instead of manually checking update fields within the handler, conditions can be set directly in the decorator.</p> <p>The filter works \"lazily\": when a handler is declared, only the chain of checks is stored, not the result. The actual evaluation happens only when a new event arrives, so filters can be easily combined and remain readable. This approach makes the code shorter and clearer, showing exactly which updates will be processed by a given handler.</p> <p>The idea behind MagicFilter is simple: describe an attribute chain and a condition, then apply it to an object. Imagine you have an object with nested fields. Instead of manually checking something like <code>if obj.foo.bar.baz == \"spam\": ...</code>, you can construct the filter declaratively:</p> <pre><code>F.foo.bar.baz == \"spam\"\n</code></pre> <p>The resulting filter is not an immediate check, but an object that \"remembers\" the condition. When processing an update, this filter is automatically applied to the object (the router handles the check under the hood). Technically, the <code>.resolve(obj)</code> method is used for this, but you don't need to call it manually \u2014 just define the condition in the decorator, and it will be executed during routing.</p> <pre><code>@r.message(F.text == \"ping\")\nasync def ping_handler(message):\n    await message.answer(\"pong\")\n</code></pre> <p>Here, the filter <code>F.text == \"ping\"</code> will be automatically checked for each incoming message. If the condition matches, the handler will be triggered.</p>"},{"location":"learn/filters/#examples_1","title":"Examples","text":"<p>The MagicFilter object supports basic logical operations on object attributes.</p> <p>Existence Check:</p> <pre><code>F.photo  # lambda message: message.photo\n</code></pre> <p>Equality:</p> <pre><code>F.text == \"hello\"        # lambda message: message.text == \"hello\"\nF.from_user.id == 42     # lambda message: message.from_user.id == 42\nF.text != \"spam\"         # lambda message: message.text != \"spam\"\n</code></pre> <p>Set membership:</p> <pre><code># lambda query: query.from_user.id in {42, 1000, 123123}\nF.from_user.id.in_({42, 1000, 123123})  \n\n# lambda query: query.data in {\"foo\", \"bar\", \"baz\"}\nF.data.in_({\"foo\", \"bar\", \"baz\"})\n</code></pre> <p>Contains:</p> <pre><code>F.text.contains(\"foo\")  # lambda message: \"foo\" in message.text\n</code></pre> <p>Starts/ends with the string:</p> <pre><code>F.text.startswith(\"foo\")  # lambda message: message.text.startswith(\"foo\")\nF.text.endswith(\"bar\")    # lambda message: message.text.endswith(\"bar\")\n</code></pre> <p>Regular Expressions:</p> <pre><code>F.text.regexp(r\"Hello, .+\")  # lambda message: re.match(r\"Hello, .+\", message.text)\n</code></pre> <p>Custom Function:</p> <pre><code># lambda message: (lambda chat: chat.id == -42)(message.chat)\nF.chat.func(lambda chat: chat.id == -42)\n</code></pre> <p>Inversion of result:</p> <pre><code>~F.text # not message.text        \n~F.text.startswith(\"spam\") #not message.text.startswith(\"spam\")\n</code></pre> <p>Combining conditions:</p> <pre><code>(F.from_user.id == 42) &amp; (F.text == \"admin\")\n\nF.text.startswith(\"a\") | F.text.endswith(\"b\")\n\n(F.from_user.id.in_({42, 777, 911})) &amp; (F.text.startswith(\"!\") | F.text.startswith(\"/\")) &amp; F.text.contains(\"ban\")\n</code></pre> <p>Attribute Modifiers (Strings):</p> <pre><code>F.text.lower() == \"test\"           # message.text.lower() == \"test\"  \nF.text.upper().in_({\"FOO\", \"BAR\"}) # message.text.upper() in {\"FOO\", \"BAR\"}\nF.text.len() == 5                  # len(message.text) == 5\n</code></pre>"},{"location":"learn/filters/#combining-filters","title":"Combining Filters","text":"<p>Combining Command and MagicFilter is a common and recommended practice: Command parses the command and creates a CommandObject, while <code>magic</code> allows you to impose additional conditions on <code>args</code> or other parts of the CommandObject.</p> <p>Filter the /echo command only if arguments are present:</p> <pre><code>@r.message(Command(\"echo\", magic=F.args.is_not(None)))\nasync def handle_echo(message: Message, command: CommandObject):\n    await bot.send_message(chat_id=message.chat_id, text=command.args)\n</code></pre> <p>Additional argument length check:</p> <pre><code>@r.message(Command(\"upper\", magic=F.args.len() &gt; 3))\nasync def handle_upper(message: Message, command: CommandObject):\n    await bot.send_message(chat_id=message.chat_id, text=(command.args or \"\").upper())\n</code></pre> <p>Check with func \u2014 single word:</p> <pre><code>@r.message(Command(\"repeat\", magic=F.args.func(lambda x: isinstance(x, str) and len(x.split()) == 1)))\nasync def handle_repeat(message: Message, command: CommandObject):\n    await bot.send_message(chat_id=message.chat_id, text=f\"{command.args} {command.args}\")\n</code></pre> <p>Combining regexp and magic:</p> <pre><code>@r.message(Command(re.compile(r\"echo_\\\\d+\"), magic=F.args))\nasync def handle_special_echo(message: Message, command: CommandObject):\n    await bot.send_message(chat_id=message.chat_id, text=f\"Special: {command.command} -&gt; {command.args}\")\n</code></pre>"},{"location":"learn/getting-started/","title":"Getting Started","text":"<p>Before getting started, we recommend creating and activating a virtual environment to isolate your project dependencies:</p> <pre><code>python -m venv .venv\nsource .venv/bin/activate   # Linux / macOS\n.venv\\Scripts\\activate      # Windows PowerShell\n</code></pre>"},{"location":"learn/getting-started/#installing-python-trueconf-bot","title":"Installing python-trueconf-bot","text":"<p>To begin working with python-trueconf-bot, install the package from the global PyPI repository:</p> <pre><code>pip install python-trueconf-bot\n</code></pre> <p>Info</p> <p>Upon installation, dependencies will be automatically pulled in: <code>websockets</code>, <code>httpx</code>, <code>mashumaro</code>, <code>pillow</code>, <code>aiofiles</code>, <code>magic-filter</code>.</p>"},{"location":"learn/getting-started/#creating-a-basic-echo-bot","title":"Creating a Basic Echo Bot","text":"<p>First, import the required classes:</p> <pre><code>from trueconf import Bot, Dispatcher, Router, F\nfrom trueconf.types import Message\n</code></pre> <p>Next, create instances of <code>Router</code> and <code>Dispatcher</code> and connect them:</p> <pre><code>r = Router()\ndp = Dispatcher()\n# dp.include_router(r)\n</code></pre> <p>The bot supports two types of authentication: token-based or login/password. You can choose the most convenient method.</p>"},{"location":"learn/getting-started/#token-based-authentication","title":"Token-Based Authentication","text":"<p>If you're using token-based connection, obtain the token as described in the official API documentation.</p> <p>It is recommended to store the token in an environment variable or <code>.env</code> file. Don\u2019t forget to add <code>.env</code> to <code>.gitignore</code> if working with public repositories.</p> <pre><code>from os import getenv\n\nTOKEN = getenv(\"TOKEN\")\nbot = Bot(server=\"video.example.com\", token=TOKEN, dispatcher=dp)\n</code></pre>"},{"location":"learn/getting-started/#loginpassword-authentication","title":"Login/Password Authentication","text":"<p>Use the <code>.from_credentials</code> method:</p> <pre><code>bot = Bot.from_credentials(\n    username=\"echo_bot\",\n    password=\"123tr\",\n    server=\"10.110.2.240\",\n    dispatcher=dp\n)\n</code></pre> <p>Info</p> <p>Each time from_credentials() is called, the bot requests a new token from the server. The token lifespan is 1 month.</p>"},{"location":"learn/getting-started/#message-handler","title":"Message Handler","text":"<p>Now let\u2019s create a simple handler for incoming messages. It will reply with the same text (a classic \"echo bot\"):</p> <pre><code>@r.message(F.text)\nasync def echo(message: Message):\n    await message.answer(message.text)\n</code></pre>"},{"location":"learn/getting-started/#running-the-bot","title":"Running the Bot","text":"<p>Run the bot inside an asynchronous <code>main()</code> function passed to <code>asyncio.run()</code>:</p> <pre><code>async def main():\n    await bot.run()\n\nimport asyncio\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre> <p>Why async/await?</p> <p>The python-trueconf-bot library is built on asyncio.</p> <p>This means that all network operations (connecting to the server, receiving and sending messages) are asynchronous and non-blocking. Therefore:</p> <ul> <li>handlers are written as <code>async def</code>,</li> <li>method calls use <code>await</code>,</li> <li>the launch is managed via <code>asyncio.run(...)</code>.</li> </ul> <p>This approach allows handling multiple events and messages in parallel \u2014 without delays or blocking.</p>"},{"location":"learn/parse-messages/","title":"Handling Requests","text":""},{"location":"learn/parse-messages/#router","title":"Router","text":"<p>Whenever a user interacts with the bot \u2014 for example, via a direct message, or when the bot is added to a group chat or channel \u2014 the bot receives an update from the server.</p> <p>To process these events, the <code>Router</code> is used. It defines which functions should be triggered upon receiving a specific type of update. This allows you to centrally manage the logic for handling various types of messages:</p> <pre><code>from trueconf import Router\n\nr = Router()\n</code></pre> <p>To handle an update with the <code>SendMessage</code> method, the handler function is wrapped with a decorator:</p> <pre><code>@r.message()\nasync def on_message(message): ...\n</code></pre>"},{"location":"learn/parse-messages/#filter-support","title":"Filter Support","text":"<p>Routers support filters based on the magic-filter library using the <code>F</code> object:</p> <pre><code>from trueconf import F\n</code></pre> <p>Filters allow you to process only those updates that match specific conditions. For example:</p> <pre><code># Messages that contain text\n@r.message(F.text)\nasync def on_message(message): ...\n\n# Messages that contain images\n@r.message(F.photo)\nasync def on_photo(message): ...\n\n# Messages from a specific user\n@r.message(F.from_user.id == \"elisa\")\nasync def on_elisa(message): ...\n</code></pre> <p>Tip</p> <p>You can find more detailed examples of filter usage in the Filter section.</p>"},{"location":"learn/parse-messages/#dispatcher","title":"Dispatcher","text":"<p>All created routers must be added to the dispatcher (<code>Dispatcher</code>). It combines all handlers and manages update routing:</p> <pre><code>from trueconf import Dispatcher\n\ndp = Dispatcher()\ndp.include_router(r)\n</code></pre>"},{"location":"learn/parse-messages/#handler-priorities","title":"Handler Priorities","text":"<ul> <li>Routers and their handlers are checked in the order they were added via <code>Dispatcher.include_router()</code>.</li> <li>Inside a single router, handlers are evaluated in the order they are declared.</li> <li>Upon the first filter match, the handler is executed and no further handlers are checked (default behavior).</li> </ul> <p>This means that if you have multiple handlers with the same filter:</p> <pre><code>@r.message(F.text == \"Hello\")\nasync def handler1(message):\n    await message.answer(\"First\")\n\n@r.message(F.text == \"Hello\")\nasync def handler2(message):\n    await message.answer(\"Second\")\n</code></pre> <p>Then only <code>handler1</code> will be triggered, and <code>handler2</code> will be ignored.</p> <p>To trigger both handlers, use different filters or combine the logic inside a single handler function.</p> <p>Tip</p> <p>For better logic separation, it's recommended to create multiple routers (e.g., <code>commands_router</code>, <code>messages_router</code>, <code>admin_router</code>) and include them in the dispatcher in the desired order. This helps organize your code and simplifies bot maintenance.</p>"},{"location":"learn/parse-messages/#code-organization-best-practices","title":"Code Organization Best Practices","text":"<ul> <li>Typically, routers are placed in separate modules (e.g., <code>handlers/messages.py</code>) and included in the main bot module via <code>include_router</code>.</li> <li>This helps separate handlers by responsibility: messages, photos, commands, etc.</li> <li>The dispatcher (<code>Dispatcher</code>) can be viewed as the central managing component that coordinates the logic for handling all incoming events.</li> </ul>"},{"location":"learn/types/","title":"Data Types","text":"<p>When developing applications, it is especially important that the IDE provides hints about available methods and class parameters. However, the router (Router) passes different data types to handlers, and the IDE cannot always correctly determine their type. Therefore, it needs a hint about which specific object is being passed.</p> <p>In python-trueconf-bot, this is handled by the <code>trueconf.types</code> package, which describes all incoming server events and requests (notifications). For responses to client requests, a separate module is provided \u2014 <code>trueconf.types.responses</code>.</p> <p>Thus:</p> <ul> <li>when working with events, use types from <code>trueconf.types</code>;</li> <li>when working with client request results, use types from <code>trueconf.types.responses</code>.</li> </ul> <p>This ensures:</p> <ul> <li>IDE autocompletion (hints for attributes and methods);</li> <li>static type checking with mypy or similar tools;</li> <li>more convenient code and documentation navigation.</li> </ul>"},{"location":"learn/types/#example-usage","title":"Example Usage","text":"<p>Suppose you want to handle an event about adding a new participant to a chat (1):</p> <ol> <li>According to the API, this request has <code>\"method\": \"addChatParticipant\"</code>.</li> </ol> <pre><code>from trueconf import Router\n\nr = Router()\n\n@r.added_chat_participant()\nasync def on_added_user(event): ...\n</code></pre> <p>To enable the IDE to provide hints about the available attributes of the <code>event</code> object, you need to specify the correct data type:</p> <pre><code>from trueconf import Router\nfrom trueconf.types import AddedChatParticipant\n\nr = Router()\n\n@r.added_chat_participant()\nasync def on_added_user(event: AddedChatParticipant):\n    who_add = event.added_by\n</code></pre> <p>In this example:</p> <ul> <li><code>AddedChatParticipant</code> describes the structure of the incoming event,</li> <li>you get convenient IDE autocompletion,</li> <li>with static type checking tools (e.g., mypy), the correctness of field access is automatically verified.</li> </ul>"},{"location":"learn/types/#raw-event","title":"\u201cRaw\u201d event","text":"<p>When using the <code>@&lt;router&gt;.event</code> decorator, you gain access to all fields of the event object, including those that are usually hidden when converting JSON into a class:</p> <p><pre><code>{\n  \"method\": \"name\",\n  \"type\": 1,\n  \"id\": 11,\n  \"payload\": {}\n}\n</code></pre> In this case, it is better to use <code>trueconf.types.Update</code>, which describes the structure of the full update received from the server.</p> <pre><code>from trueconf import Router\nfrom trueconf.types import Update\nfrom trueconf.enums import IncomingUpdateMethod\n\nr = Router()\n\n@r.event()\nasync def raw_event(event: Update):\n    if event.method == IncomingUpdateMethod.MESSAGE:\n        pass\n\n    # Alternatively, without importing enum\n    if event.method == \"SendMessage\":\n        pass\n</code></pre>"},{"location":"reference/Bot/","title":"Class <code>Bot</code>","text":"<p>Here is the reference information for the <code>Bot</code> class, including all its parameters, attributes, and methods. You can import the <code>Bot</code> class directly from the <code>trueconf</code> package:</p> <pre><code>from trueconf import Bot\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot","title":"trueconf.Bot","text":"<pre><code>Bot(server, token, web_port=443, https=True, debug=False, verify_ssl=True, dispatcher=None, receive_unread_messages=False)\n</code></pre> <p>Initializes a TrueConf chatbot instance with WebSocket connection and configuration options.</p> Source <p>trueconf.com/docs/chatbot-connector/en/connect-and-auth/#auth</p> <p>Parameters:</p> Name Type Description Default <code>server</code> <code>str</code> <p>Address of the TrueConf server.</p> required <code>token</code> <code>str</code> <p>Bot authorization token.</p> required <code>web_port</code> <code>int</code> <p>WebSocket connection port. Defaults to 443.</p> <code>443</code> <code>https</code> <code>bool</code> <p>Whether to use HTTPS protocol. Defaults to True.</p> <code>True</code> <code>debug</code> <code>bool</code> <p>Enables debug mode. Defaults to False.</p> <code>False</code> <code>verify_ssl</code> <code>bool</code> <p>Whether to verify the server's SSL certificate. Defaults to True.</p> <code>True</code> <code>dispatcher</code> <code>Dispatcher | None</code> <p>Dispatcher instance for registering handlers.</p> <code>None</code> <code>receive_unread_messages</code> <code>bool</code> <p>Whether to receive unread messages on connection. Defaults to False.</p> <code>False</code> Note <p>Alternatively, you can authorize using a username and password via the <code>from_credentials()</code> class method.</p>"},{"location":"reference/Bot/#trueconf.Bot.authorized_event","title":"authorized_event  <code>instance-attribute</code>","text":"<pre><code>authorized_event = Event()\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.connected_event","title":"connected_event  <code>instance-attribute</code>","text":"<pre><code>connected_event = Event()\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.debug","title":"debug  <code>instance-attribute</code>","text":"<pre><code>debug = debug\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.dp","title":"dp  <code>instance-attribute</code>","text":"<pre><code>dp = dispatcher or Dispatcher()\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.https","title":"https  <code>instance-attribute</code>","text":"<pre><code>https = https\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.port","title":"port  <code>instance-attribute</code>","text":"<pre><code>port = 443 if https else web_port\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.receive_unread_messages","title":"receive_unread_messages  <code>instance-attribute</code>","text":"<pre><code>receive_unread_messages = receive_unread_messages\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.server","title":"server  <code>instance-attribute</code>","text":"<pre><code>server = server\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.stopped_event","title":"stopped_event  <code>instance-attribute</code>","text":"<pre><code>stopped_event = Event()\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.token","title":"token  <code>property</code>","text":"<pre><code>token\n</code></pre> <p>Returns the bot's authorization token.</p> <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>The access token used for authentication.</p>"},{"location":"reference/Bot/#trueconf.Bot.verify_ssl","title":"verify_ssl  <code>instance-attribute</code>","text":"<pre><code>verify_ssl = verify_ssl\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.web_port","title":"web_port  <code>instance-attribute</code>","text":"<pre><code>web_port = web_port\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.add_participant_to_chat","title":"add_participant_to_chat  <code>async</code>","text":"<pre><code>add_participant_to_chat(chat_id, user_id, display_history=False)\n</code></pre> <p>Adds a participant to the specified chat.</p> <p>Optionally allows showing chat history to the newly added participant. The <code>display_history</code> parameter is supported only in TrueConf Server version 5.5.2 and above.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#addChatParticipant</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat to add the participant to.</p> required <code>user_id</code> <code>str</code> <p>Identifier of the user to be added. If no domain is specified, the server domain will be used.</p> required <code>display_history</code> <code>bool</code> <p>Whether to show previous chat history to the participant. Requires TrueConf Server 5.5.2+. Defaults to False.</p> <code>False</code> <p>Returns:</p> Name Type Description <code>AddChatParticipantResponse</code> <code>AddChatParticipantResponse</code> <p>Object containing the result of the participant addition.</p> Example <pre><code>await bot.add_participant_to_chat(\n    chat_id=\"chat123\",\n    user_id=\"user456\",\n    display_history=True\n)\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.change_participant_role","title":"change_participant_role  <code>async</code>","text":"<pre><code>change_participant_role(chat_id, user_id, role)\n</code></pre> <p>Requires TrueConf Server 5.5.2+.</p> <p>Changes the role of a participant in the specified group chat.</p> <p>This method requires that the bot has moderator (admin) or owner rights in the chat.</p> Supported roles in group chat <ul> <li>\"owner\" \u2014 group chat owner</li> <li>\"admin\" \u2014 appointed moderator of the group chat</li> <li>\"user\" \u2014 regular participant of a group chat</li> </ul> It is recommended to use the enumeration class for safer role assignment <pre><code>from trueconf.enums import ChatParticipantRole\n</code></pre> <p>For a full list of roles in conference, channel, or Favorites chats, see the documentation:</p> Role descriptions <p>trueconf.com/docs/chatbot-connector/en/roles-and-users-rules/#which-roles-has-apis</p> Role permissions matrix <p>trueconf.com/docs/chatbot-connector/en/roles-and-users-rules/#roles-rules-group-chats</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#changeParticipantRole</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat where the role should be changed.</p> required <code>user_id</code> <code>str</code> <p>Identifier of the participant whose role is being updated.</p> required <code>role</code> <code>str | ChatParticipantRole</code> <p>New role to assign. Must be one of the supported roles listed above.</p> required <p>Returns:</p> Name Type Description <code>ChangeParticipantRoleResponse</code> <code>ChangeParticipantRoleResponse</code> <p>Object containing the result of the role change operation.</p> Example <pre><code>from trueconf.enums import ChatParticipantRole as role\n\nawait bot.change_participant_role(\n    chat_id=\"chat123\",\n    user_id=\"user456\",\n    role=role.ADMIN\n)\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.create_channel","title":"create_channel  <code>async</code>","text":"<pre><code>create_channel(title)\n</code></pre> <p>Creates a new channel with the specified title.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#createChannel</p> <p>Parameters:</p> Name Type Description Default <code>title</code> <code>str</code> <p>Title of the new channel.</p> required <p>Returns:</p> Name Type Description <code>CreateChannelResponse</code> <code>CreateChannelResponse</code> <p>Object containing the result of the channel creation.</p>"},{"location":"reference/Bot/#trueconf.Bot.create_favorites_chat","title":"create_favorites_chat  <code>async</code>","text":"<pre><code>create_favorites_chat()\n</code></pre> <p>Requires TrueConf Server 5.5.2+</p> <p>Creates a \"Favorites\" chat for the current user.</p> <p>This type of chat is a personal space accessible only to its owner. It can be used to store notes, upload files, or test bot features in a private context.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#createFavoritesChat</p> <p>Returns:</p> Name Type Description <code>CreateFavoritesChatResponse</code> <code>CreateFavoritesChatResponse</code> <p>An object containing information about the newly created chat.</p>"},{"location":"reference/Bot/#trueconf.Bot.create_group_chat","title":"create_group_chat  <code>async</code>","text":"<pre><code>create_group_chat(title)\n</code></pre> <p>Creates a new group chat with the specified title.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#createGroupChat</p> <p>Parameters:</p> Name Type Description Default <code>title</code> <code>str</code> <p>Title of the new group chat.</p> required <p>Returns:</p> Name Type Description <code>CreateGroupChatResponse</code> <code>CreateGroupChatResponse</code> <p>Object containing the result of the group chat creation.</p>"},{"location":"reference/Bot/#trueconf.Bot.create_personal_chat","title":"create_personal_chat  <code>async</code>","text":"<pre><code>create_personal_chat(user_id)\n</code></pre> <p>Creates a personal (P2P) chat with a user by their identifier.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#createP2PChat</p> <p>Parameters:</p> Name Type Description Default <code>user_id</code> <code>str</code> <p>Identifier of the user. Can be with or without a domain.</p> required <p>Returns:</p> Name Type Description <code>CreateP2PChatResponse</code> <code>CreateP2PChatResponse</code> <p>Object containing the result of the personal chat creation.</p> Note <p>Creating a personal chat (peer-to-peer) with a server user. If the bot has never messaged this user before, a new chat will be created. If the bot has previously sent messages to this user, the existing chat will be returned.</p>"},{"location":"reference/Bot/#trueconf.Bot.delete_chat","title":"delete_chat  <code>async</code>","text":"<pre><code>delete_chat(chat_id)\n</code></pre> <p>Deletes a chat by its identifier.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#removeChat</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat to be deleted.</p> required <p>Returns:</p> Name Type Description <code>RemoveChatResponse</code> <code>RemoveChatResponse</code> <p>Object containing the result of the chat deletion.</p>"},{"location":"reference/Bot/#trueconf.Bot.download_file_by_id","title":"download_file_by_id  <code>async</code>","text":"<pre><code>download_file_by_id(file_id, dest_path=None)\n</code></pre> <p>Downloads a file by its ID, waiting for the upload to complete if necessary.</p> <p>If the file is already in the READY state, it will be downloaded immediately. If the file is in the NOT_AVAILABLE state, the method will exit without downloading. In other cases, the bot will wait for the upload to finish and then attempt to download the file.</p> <p>Parameters:</p> Name Type Description Default <code>file_id</code> <code>str</code> <p>Unique identifier of the file on the server.</p> required <code>dest_path</code> <code>str</code> <p>Path where the file should be saved. If not specified, a temporary file will be created using <code>NamedTemporaryFile</code> (with prefix <code>tc_dl_</code>, suffix set to the original file name, and <code>delete=False</code> to keep the file on disk).</p> <code>None</code> <p>Returns:</p> Type Description <code>Path | None</code> <p>Path | None: Path to the downloaded file, or None if the download failed.</p>"},{"location":"reference/Bot/#trueconf.Bot.edit_message","title":"edit_message  <code>async</code>","text":"<pre><code>edit_message(message_id, text, parse_mode=TEXT)\n</code></pre> <p>Edits a previously sent message.</p> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#editMessage</p> <p>Parameters:</p> Name Type Description Default <code>message_id</code> <code>str</code> <p>Identifier of the message to be edited.</p> required <code>text</code> <code>str</code> <p>New text content for the message.</p> required <code>parse_mode</code> <code>ParseMode | str</code> <p>Text formatting mode. Defaults to plain text.</p> <code>TEXT</code> <p>Returns:</p> Name Type Description <code>EditMessageResponse</code> <code>EditMessageResponse</code> <p>Object containing the result of the message update.</p>"},{"location":"reference/Bot/#trueconf.Bot.edit_survey","title":"edit_survey  <code>async</code>","text":"<pre><code>edit_survey(message_id, title, survey_campaign_id, survey_type=NON_ANONYMOUS)\n</code></pre> <p>Edits a previously sent survey.</p> Source <p>trueconf.com/docs/chatbot-connector/en/surveys/#editSurvey</p> <p>Parameters:</p> Name Type Description Default <code>message_id</code> <code>str</code> <p>Identifier of the message containing the survey to edit.</p> required <code>title</code> <code>str</code> <p>New title of the survey.</p> required <code>survey_campaign_id</code> <code>str</code> <p>Identifier of the survey campaign.</p> required <code>survey_type</code> <code>SurveyType</code> <p>Type of the survey (anonymous or non-anonymous). Defaults to non-anonymous.</p> <code>NON_ANONYMOUS</code> <p>Returns:</p> Name Type Description <code>EditSurveyResponse</code> <code>EditSurveyResponse</code> <p>Object containing the result of the survey update.</p>"},{"location":"reference/Bot/#trueconf.Bot.forward_message","title":"forward_message  <code>async</code>","text":"<pre><code>forward_message(chat_id, message_id)\n</code></pre> <p>Forwards a message to the specified chat.</p> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#forwardMessage</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat to forward the message to.</p> required <code>message_id</code> <code>str</code> <p>Identifier of the message to be forwarded.</p> required <p>Returns:</p> Name Type Description <code>ForwardMessageResponse</code> <code>ForwardMessageResponse</code> <p>Object containing the result of the message forwarding.</p>"},{"location":"reference/Bot/#trueconf.Bot.from_credentials","title":"from_credentials  <code>classmethod</code>","text":"<pre><code>from_credentials(server, username, password, dispatcher=None, receive_unread_messages=False, verify_ssl=True, **token_opts)\n</code></pre> <p>Creates a bot instance using username and password authentication.</p> Source <p>trueconf.com/docs/chatbot-connector/en/connect-and-auth/#connect-and-auth</p> <p>Parameters:</p> Name Type Description Default <code>server</code> <code>str</code> <p>Address of the TrueConf server.</p> required <code>username</code> <code>str</code> <p>Username for authentication.</p> required <code>password</code> <code>str</code> <p>Password for authentication.</p> required <code>dispatcher</code> <code>Dispatcher | None</code> <p>Dispatcher instance for registering handlers.</p> <code>None</code> <code>receive_unread_messages</code> <code>bool</code> <p>Whether to receive unread messages on connection. Defaults to False.</p> <code>False</code> <code>verify_ssl</code> <code>bool</code> <p>Whether to verify the server's SSL certificate. Defaults to True.</p> <code>True</code> <code>**token_opts</code> <code>Unpack[TokenOpts]</code> <p>Additional options passed to the token request, such as <code>web_port</code> and <code>https</code>.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>Bot</code> <code>Self</code> <p>An authorized bot instance.</p> <p>Raises:</p> Type Description <code>RuntimeError</code> <p>If the token could not be obtained.</p>"},{"location":"reference/Bot/#trueconf.Bot.get_chat_by_id","title":"get_chat_by_id  <code>async</code>","text":"<pre><code>get_chat_by_id(chat_id)\n</code></pre> <p>Retrieves information about a chat by its identifier.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#getChatById</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat.</p> required <p>Returns:</p> Name Type Description <code>GetChatByIDResponse</code> <code>GetChatByIdResponse</code> <p>Object containing information about the chat.</p>"},{"location":"reference/Bot/#trueconf.Bot.get_chat_history","title":"get_chat_history  <code>async</code>","text":"<pre><code>get_chat_history(chat_id, count, from_message_id=None)\n</code></pre> <p>Retrieves the message history of the specified chat.</p> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#getChatHistory</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat.</p> required <code>count</code> <code>int</code> <p>Number of messages to retrieve.</p> required <code>from_message_id</code> <code>str | None</code> <p>Identifier of the message to start retrieving history from. If not specified, the history will be loaded from the most recent message.</p> <code>None</code> <p>Returns:</p> Name Type Description <code>GetChatHistoryResponse</code> <code>GetChatHistoryResponse</code> <p>Object containing the result of the chat history request.</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If the count number is less than 1.</p>"},{"location":"reference/Bot/#trueconf.Bot.get_chat_participants","title":"get_chat_participants  <code>async</code>","text":"<pre><code>get_chat_participants(chat_id, page_size, page_number)\n</code></pre> <p>Retrieves a paginated list of chat participants.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#getChatParticipants</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat.</p> required <code>page_size</code> <code>int</code> <p>Number of participants per page.</p> required <code>page_number</code> <code>int</code> <p>Page number.</p> required <p>Returns:</p> Name Type Description <code>GetChatParticipantsResponse</code> <code>GetChatParticipantsResponse</code> <p>Object containing the result of the participant list request.</p>"},{"location":"reference/Bot/#trueconf.Bot.get_chats","title":"get_chats  <code>async</code>","text":"<pre><code>get_chats(count=10, page=1)\n</code></pre> <p>Retrieves a paginated list of chats available to the bot.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#getChats</p> <p>Parameters:</p> Name Type Description Default <code>count</code> <code>int</code> <p>Number of chats per page. Defaults to 10.</p> <code>10</code> <code>page</code> <code>int</code> <p>Page number. Must be greater than 0. Defaults to 1.</p> <code>1</code> <p>Returns:</p> Name Type Description <code>GetChatsResponse</code> <code>GetChatsResponse</code> <p>Object containing the result of the chat list request.</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If the page number is less than 1.</p>"},{"location":"reference/Bot/#trueconf.Bot.get_file_info","title":"get_file_info  <code>async</code>","text":"<pre><code>get_file_info(file_id)\n</code></pre> <p>Retrieves information about a file by its identifier.</p> Source <p>trueconf.com/docs/chatbot-connector/en/files/#getFileInfo</p> <p>Parameters:</p> Name Type Description Default <code>file_id</code> <code>str</code> <p>Identifier of the file.</p> required <p>Returns:</p> Name Type Description <code>GetFileInfoResponse</code> <code>GetFileInfoResponse</code> <p>Object containing information about the file.</p>"},{"location":"reference/Bot/#trueconf.Bot.get_message_by_id","title":"get_message_by_id  <code>async</code>","text":"<pre><code>get_message_by_id(message_id)\n</code></pre> <p>Retrieves a message by its identifier.</p> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#getMessageById</p> <p>Parameters:</p> Name Type Description Default <code>message_id</code> <code>str</code> <p>Identifier of the message to retrieve.</p> required <p>Returns:</p> Name Type Description <code>GetMessageByIdResponse</code> <code>GetMessageByIdResponse</code> <p>Object containing the retrieved message data.</p>"},{"location":"reference/Bot/#trueconf.Bot.get_user_display_name","title":"get_user_display_name  <code>async</code>","text":"<pre><code>get_user_display_name(user_id)\n</code></pre> <p>Retrieves the display name of a user by their TrueConf ID.</p> Source <p>trueconf.com/docs/chatbot-connector/en/contacts/#getUserDisplayName</p> <p>Parameters:</p> Name Type Description Default <code>user_id</code> <code>str</code> <p>User's TrueConf ID. Can be specified with or without a domain.</p> required <p>Returns:</p> Name Type Description <code>GetUserDisplayNameResponse</code> <code>GetUserDisplayNameResponse</code> <p>Object containing the user's display name.</p>"},{"location":"reference/Bot/#trueconf.Bot.has_chat_participant","title":"has_chat_participant  <code>async</code>","text":"<pre><code>has_chat_participant(chat_id, user_id)\n</code></pre> <p>Checks whether the specified user is a participant in the chat.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#hasChatParticipant</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat.</p> required <code>user_id</code> <code>str</code> <p>Identifier of the user. Can be with or without a domain.</p> required <p>Returns:</p> Name Type Description <code>HasChatParticipantResponse</code> <code>HasChatParticipantResponse</code> <p>Object containing the result of the check.</p>"},{"location":"reference/Bot/#trueconf.Bot.me","title":"me  <code>async</code>","text":"<pre><code>me()\n</code></pre> <p>Returns the identifier of the bot's personal (Favorites) chat.</p> <p>If the chat does not exist yet, it will be created automatically. The result is cached to prevent redundant API calls.</p> <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>Chat ID of the bot's personal Favorites chat.</p>"},{"location":"reference/Bot/#trueconf.Bot.remove_message","title":"remove_message  <code>async</code>","text":"<pre><code>remove_message(message_id, for_all=False)\n</code></pre> <p>Removes a message by its identifier.</p> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#removeMessage</p> <p>Parameters:</p> Name Type Description Default <code>message_id</code> <code>str</code> <p>Identifier of the message to be removed.</p> required <code>for_all</code> <code>bool</code> <p>If True, the message will be removed for all participants. Default to False (the message is removed only for the bot).</p> <code>False</code> <p>Returns:</p> Name Type Description <code>RemoveMessageResponse</code> <code>RemoveMessageResponse</code> <p>Object containing the result of the message deletion.</p>"},{"location":"reference/Bot/#trueconf.Bot.remove_participant_from_chat","title":"remove_participant_from_chat  <code>async</code>","text":"<pre><code>remove_participant_from_chat(chat_id, user_id)\n</code></pre> <p>Removes a participant from the specified chat.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#removeChatParticipant</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat to remove the participant from.</p> required <code>user_id</code> <code>str</code> <p>Identifier of the user to be removed.</p> required <p>Returns:</p> Name Type Description <code>RemoveChatParticipantResponse</code> <code>RemoveChatParticipantResponse</code> <p>Object containing the result of the participant removal.</p>"},{"location":"reference/Bot/#trueconf.Bot.reply_message","title":"reply_message  <code>async</code>","text":"<pre><code>reply_message(chat_id, message_id, text, parse_mode=TEXT)\n</code></pre> <p>Sends a reply to an existing message in the chat.</p> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#replyMessage</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat where the reply will be sent.</p> required <code>message_id</code> <code>str</code> <p>Identifier of the message to reply to.</p> required <code>text</code> <code>str</code> <p>Text content of the reply.</p> required <code>parse_mode</code> <code>ParseMode | str</code> <p>Text formatting mode. Defaults to plain text.</p> <code>TEXT</code> <p>Returns:</p> Name Type Description <code>SendMessageResponse</code> <code>SendMessageResponse</code> <p>Object containing the result of the message delivery.</p>"},{"location":"reference/Bot/#trueconf.Bot.run","title":"run  <code>async</code>","text":"<pre><code>run(handle_signals=True)\n</code></pre> <p>Runs the bot and waits until it stops. Supports handling termination signals (SIGINT, SIGTERM).</p> <p>Parameters:</p> Name Type Description Default <code>handle_signals</code> <code>bool</code> <p>Whether to handle termination signals. Defaults to True.</p> <code>True</code> <p>Returns:</p> Type Description <code>None</code> <p>None</p>"},{"location":"reference/Bot/#trueconf.Bot.send_document","title":"send_document  <code>async</code>","text":"<pre><code>send_document(chat_id, file, caption=None, parse_mode=TEXT)\n</code></pre> <p>Sends a document or any arbitrary file to the specified chat.</p> <p>This method supports all file types, including images. However, images sent via this method will be transferred in original, uncompressed form. If you want to send a compressed image with preview support, use <code>send_photo()</code> instead.</p> <p>The file must be provided as an instance of one of the <code>InputFile</code> subclasses: <code>FSInputFile</code>, <code>BufferedInputFile</code>, or <code>URLInputFile</code>.</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>The identifier of the chat to which the document will be sent.</p> required <code>file</code> <code>InputFile</code> <p>The file to be uploaded. Must be a subclass of <code>InputFile</code>.</p> required <code>caption</code> <code>str | None</code> <p>Optional caption text to be sent with the file.</p> <code>None</code> <code>parse_mode</code> <code>ParseMode | str</code> <p>Text formatting mode (e.g., Markdown, HTML, or plain text).</p> <code>TEXT</code> <p>Returns:</p> Name Type Description <code>SendFileResponse</code> <code>SendFileResponse</code> <p>An object containing the result of the file upload.</p> Example <pre><code>await bot.send_document(\n    chat_id=\"a1s2d3f4f5g6\",\n    file=FSInputFile(\"report.pdf\"),\n    caption=\"\ud83d\udcc4 Annual report **for 2025**\",\n    parse_mode=ParseMode.MARKDOWN\n)\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.send_message","title":"send_message  <code>async</code>","text":"<pre><code>send_message(chat_id, text, parse_mode=TEXT)\n</code></pre> <p>Sends a message to the specified chat.</p> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#sendMessage</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat to send the message to.</p> required <code>text</code> <code>str</code> <p>Text content of the message.</p> required <code>parse_mode</code> <code>ParseMode | str</code> <p>Text formatting mode. Defaults to plain text.</p> <code>TEXT</code> <p>Returns:</p> Name Type Description <code>SendMessageResponse</code> <code>SendMessageResponse</code> <p>Object containing the result of the message delivery.</p>"},{"location":"reference/Bot/#trueconf.Bot.send_photo","title":"send_photo  <code>async</code>","text":"<pre><code>send_photo(chat_id, file, preview, caption=None, parse_mode=TEXT)\n</code></pre> <p>Sends a photo to the specified chat, with optional caption and preview support.</p> <p>This method is recommended when sending compressed images with preview support. If you want to send uncompressed images or arbitrary files, use <code>send_document()</code> instead.</p> <p>The file must be provided as an instance of one of the <code>InputFile</code> subclasses: <code>FSInputFile</code>, <code>BufferedInputFile</code>, or <code>URLInputFile</code>.</p> <p>Supported image formats include: <code>.jpg</code>, <code>.jpeg</code>, <code>.png</code>, <code>.webp</code>, <code>.bmp</code>, <code>.gif</code>, <code>.tiff</code></p> Source <p>trueconf.com/docs/chatbot-connector/en/files/#file-transfer</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat to which the photo will be sent.</p> required <code>file</code> <code>InputFile</code> <p>The photo file to upload. Must be a subclass of <code>InputFile</code>.</p> required <code>preview</code> <code>InputFile | None</code> <p>Optional preview image. Must also be an <code>InputFile</code> if provided.</p> required <code>caption</code> <code>str | None</code> <p>Optional caption to be sent along with the image.</p> <code>None</code> <code>parse_mode</code> <code>ParseMode | str</code> <p>Formatting mode for the caption (e.g., Markdown, HTML, plain text).</p> <code>TEXT</code> <p>Returns:</p> Name Type Description <code>SendFileResponse</code> <code>SendFileResponse</code> <p>An object containing the result of the file upload.</p> Example <pre><code>await bot.send_photo(\n    chat_id=\"a1s2d3f4f5g6\",\n    file=FSInputFile(\"image.jpg\"),\n    preview=FSInputFile(\"image_preview.webp\"),\n    caption=\"Here's our **team** photo \ud83d\udcf8\",\n    parse_mode=ParseMode.MARKDOWN\n)\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.send_sticker","title":"send_sticker  <code>async</code>","text":"<pre><code>send_sticker(chat_id, file)\n</code></pre> <p>Sends a sticker in WebP format to the specified chat.</p> <p>The file must have a MIME type of <code>'image/webp'</code>, otherwise a <code>TypeError</code> will be raised. The file must be an instance of one of the <code>InputFile</code> subclasses: <code>FSInputFile</code>, <code>BufferedInputFile</code>, or <code>URLInputFile</code>.</p> <p>A preview is automatically generated from the source file, as required for sticker uploads in TrueConf.</p> Source <p>trueconf.com/docs/chatbot-connector/en/files/#file-transfer</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat to which the sticker will be sent.</p> required <code>file</code> <code>InputFile</code> <p>The sticker file in WebP format. Must be a subclass of <code>InputFile</code>.</p> required <p>Returns:</p> Name Type Description <code>SendFileResponse</code> <code>SendFileResponse</code> <p>An object containing the result of the file upload.</p> <p>Raises:</p> Type Description <code>TypeError</code> <p>If the file's MIME type is not <code>'image/webp'</code>.</p> Example <pre><code>await bot.send_sticker(chat_id=\"user123\", file=FSInputFile(\"sticker.webp\"))\n</code></pre>"},{"location":"reference/Bot/#trueconf.Bot.send_survey","title":"send_survey  <code>async</code>","text":"<pre><code>send_survey(chat_id, title, survey_campaign_id, reply_message_id=None, survey_type=NON_ANONYMOUS)\n</code></pre> <p>Sends a survey to the specified chat.</p> Source <p>trueconf.com/docs/chatbot-connector/en/surveys/#sendSurvey</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the chat to send the survey to.</p> required <code>title</code> <code>str</code> <p>Title of the survey displayed in the chat.</p> required <code>survey_campaign_id</code> <code>str</code> <p>Identifier of the survey campaign.</p> required <code>reply_message_id</code> <code>str</code> <p>Identifier of the message being replied to.</p> <code>None</code> <code>survey_type</code> <code>SurveyType</code> <p>Type of the survey (anonymous or non-anonymous). Defaults to non-anonymous.</p> <code>NON_ANONYMOUS</code> <p>Returns:</p> Name Type Description <code>SendSurveyResponse</code> <code>SendSurveyResponse</code> <p>Object containing the result of the survey submission.</p>"},{"location":"reference/Bot/#trueconf.Bot.server_name","title":"server_name  <code>async</code>","text":"<pre><code>server_name()\n</code></pre> <p>Returns the domain name of the TrueConf server.</p> <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>Domain name of the connected server.</p>"},{"location":"reference/Bot/#trueconf.Bot.shutdown","title":"shutdown  <code>async</code>","text":"<pre><code>shutdown()\n</code></pre> <p>Gracefully shuts down the bot, cancels the connection task, and closes active sessions.</p> <p>This method:</p> <ul> <li>Cancels the connection task if it is still active;</li> <li>Closes the WebSocket session or <code>self.session</code> if they are open;</li> <li>Clears the connection and authorization events;</li> <li>Sets the <code>stopped_event</code> flag.</li> </ul> <p>Returns:</p> Type Description <code>None</code> <p>None</p>"},{"location":"reference/Bot/#trueconf.Bot.start","title":"start  <code>async</code>","text":"<pre><code>start()\n</code></pre> <p>Starts the bot by connecting to the server and listening for incoming events.</p> Note <p>This method is safe to call multiple times \u2014 subsequent calls are ignored if the connection is already active.</p> <p>Returns:</p> Type Description <code>None</code> <p>None</p>"},{"location":"reference/Bot/#trueconf.Bot.subscribe_file_progress","title":"subscribe_file_progress  <code>async</code>","text":"<pre><code>subscribe_file_progress(file_id)\n</code></pre> <p>Subscribes to file transfer progress updates.</p> Source <p>trueconf.com/docs/chatbot-connector/en/files/#subscribeFileProgress</p> <p>Parameters:</p> Name Type Description Default <code>file_id</code> <code>str</code> <p>Identifier of the file.</p> required <p>Returns:</p> Name Type Description <code>SubscribeFileProgressResponse</code> <code>SubscribeFileProgressResponse</code> <p>Object containing the result of the subscription.</p> Note <p>If the file is in the UPLOADING status, you can subscribe to the upload process to be notified when the file becomes available.</p>"},{"location":"reference/Bot/#trueconf.Bot.unsubscribe_file_progress","title":"unsubscribe_file_progress  <code>async</code>","text":"<pre><code>unsubscribe_file_progress(file_id)\n</code></pre> <p>Unsubscribes from receiving file upload progress events.</p> Source <p>trueconf.com/docs/chatbot-connector/en/files/#unsubscribeFileProgress</p> <p>Parameters:</p> Name Type Description Default <code>file_id</code> <code>str</code> <p>Identifier of the file.</p> required <p>Returns:</p> Name Type Description <code>UnsubscribeFileProgressResponse</code> <code>UnsubscribeFileProgressResponse</code> <p>Object containing the result of the unsubscription.</p> Note <p>If necessary, you can unsubscribe from file upload events that were previously subscribed to using the <code>subscribe_file_progress()</code> method.</p>"},{"location":"reference/Dispatcher/","title":"Class <code>Dispatcher</code>","text":"<p>Here is the reference information for the <code>Dispatcher</code> class, including all its parameters, attributes, and methods. You can import the <code>Dispatcher</code> class directly from the <code>trueconf</code> package:</p> <pre><code>from trueconf import Dispatcher\n</code></pre>"},{"location":"reference/Dispatcher/#trueconf.Dispatcher","title":"trueconf.Dispatcher","text":"<pre><code>Dispatcher()\n</code></pre> <p>Central event dispatcher for processing and routing incoming events.</p> <p>The <code>Dispatcher</code> aggregates one or more <code>Router</code> instances and feeds each incoming event through them. The routers are traversed recursively via their <code>subrouters</code> (using <code>_iter_all()</code>), and each event is passed to <code>_feed()</code> of each router in order until it is handled.</p> <p>Typical usage includes registering routers with handlers and then calling <code>feed_update()</code> with incoming events.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; dispatcher = Dispatcher()\n&gt;&gt;&gt; dispatcher.include_router(my_router)\n</code></pre> <p>Attributes:</p> Name Type Description <code>routers</code> <code>List[Router]</code> <p>List of root routers included in the dispatcher.</p> <p>Initializes an empty dispatcher with no routers.</p>"},{"location":"reference/Dispatcher/#trueconf.Dispatcher.routers","title":"routers  <code>instance-attribute</code>","text":"<pre><code>routers = []\n</code></pre>"},{"location":"reference/Dispatcher/#trueconf.Dispatcher.include_router","title":"include_router","text":"<pre><code>include_router(router)\n</code></pre> <p>Includes a router to be used by the dispatcher.</p> <p>Parameters:</p> Name Type Description Default <code>router</code> <code>Router</code> <p>A <code>Router</code> instance to include.</p> required"},{"location":"reference/Enums/","title":"Enums","text":"<p>You can import all enums at once:</p> <pre><code>from trueconf.enums import *\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums","title":"trueconf.enums","text":""},{"location":"reference/Enums/#trueconf.enums.ChatParticipantRole","title":"ChatParticipantRole","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>This object represents a possible participant role in a chat.</p> Source <p>trueconf.com/docs/chatbot-connector/en/objects/#chatparticipantroleenum</p>"},{"location":"reference/Enums/#trueconf.enums.ChatParticipantRole.ADMIN","title":"ADMIN  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ADMIN = 'admin'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ChatParticipantRole.CONF_MODERATOR","title":"CONF_MODERATOR  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CONF_MODERATOR = 'conf_moderator'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ChatParticipantRole.CONF_OWNER","title":"CONF_OWNER  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CONF_OWNER = 'conf_owner'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ChatParticipantRole.FAVORITES_OWNER","title":"FAVORITES_OWNER  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>FAVORITES_OWNER = 'favorites_owner'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ChatParticipantRole.OWNER","title":"OWNER  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>OWNER = 'owner'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ChatParticipantRole.USER","title":"USER  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>USER = 'user'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ChatParticipantRole.WRITER","title":"WRITER  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>WRITER = 'writer'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ChatType","title":"ChatType","text":"<p>               Bases: <code>int</code>, <code>Enum</code></p> <p>The enumeration contains possible chat types.</p> Source <p>trueconf.com/docs/chatbot-connector/en/objects/#chattypeenum</p>"},{"location":"reference/Enums/#trueconf.enums.ChatType.CHANNEL","title":"CHANNEL  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CHANNEL = 6\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ChatType.FAVORITES","title":"FAVORITES  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>FAVORITES = 5\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ChatType.GROUP","title":"GROUP  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>GROUP = 2\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ChatType.P2P","title":"P2P  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>P2P = 1\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ChatType.SYSTEM","title":"SYSTEM  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>SYSTEM = 3\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ChatType.UNDEF","title":"UNDEF  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>UNDEF = 0\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.EnvelopeAuthorType","title":"EnvelopeAuthorType","text":"<p>               Bases: <code>int</code>, <code>Enum</code></p> <p>The enumeration contains possible author types.</p> Source <p>trueconf.com/docs/chatbot-connector/en/objects/#envelopeauthortypeenum</p>"},{"location":"reference/Enums/#trueconf.enums.EnvelopeAuthorType.SYSTEM","title":"SYSTEM  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>SYSTEM = 0\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.EnvelopeAuthorType.USER","title":"USER  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>USER = 1\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.FileReadyState","title":"FileReadyState","text":"<p>               Bases: <code>int</code>, <code>Enum</code></p> <p>This enumeration is used to indicate the status of a file on the server.</p> Source <p>trueconf.com/docs/chatbot-connector/en/objects/#filereadystateenum</p>"},{"location":"reference/Enums/#trueconf.enums.FileReadyState.NOT_AVAILABLE","title":"NOT_AVAILABLE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>NOT_AVAILABLE = 0\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.FileReadyState.READY","title":"READY  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>READY = 2\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.FileReadyState.UPLOADING","title":"UPLOADING  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>UPLOADING = 1\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.IncomingUpdateMethod","title":"IncomingUpdateMethod","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p>"},{"location":"reference/Enums/#trueconf.enums.IncomingUpdateMethod.ADDED_CHAT_PARTICIPANT","title":"ADDED_CHAT_PARTICIPANT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ADDED_CHAT_PARTICIPANT = 'addChatParticipant'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.IncomingUpdateMethod.CHANGED_PARTICIPANT_ROLE","title":"CHANGED_PARTICIPANT_ROLE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CHANGED_PARTICIPANT_ROLE = 'changeParticipantRole'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.IncomingUpdateMethod.CREATED_CHANNEL","title":"CREATED_CHANNEL  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CREATED_CHANNEL = 'createChannel'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.IncomingUpdateMethod.CREATED_FAVORITES_CHAT","title":"CREATED_FAVORITES_CHAT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CREATED_FAVORITES_CHAT = 'createFavoritesChat'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.IncomingUpdateMethod.CREATED_GROUP_CHAT","title":"CREATED_GROUP_CHAT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CREATED_GROUP_CHAT = 'createGroupChat'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.IncomingUpdateMethod.CREATED_PERSONAL_CHAT","title":"CREATED_PERSONAL_CHAT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CREATED_PERSONAL_CHAT = 'createP2PChat'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.IncomingUpdateMethod.EDITED_MESSAGE","title":"EDITED_MESSAGE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>EDITED_MESSAGE = 'editMessage'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.IncomingUpdateMethod.MESSAGE","title":"MESSAGE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MESSAGE = 'sendMessage'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.IncomingUpdateMethod.REMOVED_CHAT","title":"REMOVED_CHAT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>REMOVED_CHAT = 'removeChat'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.IncomingUpdateMethod.REMOVED_CHAT_PARTICIPANT","title":"REMOVED_CHAT_PARTICIPANT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>REMOVED_CHAT_PARTICIPANT = 'removeChatParticipant'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.IncomingUpdateMethod.REMOVED_MESSAGE","title":"REMOVED_MESSAGE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>REMOVED_MESSAGE = 'removeMessage'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.IncomingUpdateMethod.UPLOADING_PROGRESS","title":"UPLOADING_PROGRESS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>UPLOADING_PROGRESS = 'uploadFileProgress'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.MessageType","title":"MessageType","text":"<p>               Bases: <code>int</code>, <code>Enum</code></p> <p>The enumeration contains the message type.</p> Source <p>trueconf.com/docs/chatbot-connector/en/objects/#envelopetypeenum</p>"},{"location":"reference/Enums/#trueconf.enums.MessageType.ADD_PARTICIPANT","title":"ADD_PARTICIPANT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ADD_PARTICIPANT = 1\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.MessageType.ATTACHMENT","title":"ATTACHMENT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ATTACHMENT = 202\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.MessageType.FORWARDED_MESSAGE","title":"FORWARDED_MESSAGE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>FORWARDED_MESSAGE = 201\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.MessageType.PARTICIPANT_ROLE","title":"PARTICIPANT_ROLE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>PARTICIPANT_ROLE = 110\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.MessageType.PLAIN_MESSAGE","title":"PLAIN_MESSAGE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>PLAIN_MESSAGE = 200\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.MessageType.REMOVE_PARTICIPANT","title":"REMOVE_PARTICIPANT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>REMOVE_PARTICIPANT = 2\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.MessageType.SURVEY","title":"SURVEY  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>SURVEY = 204\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.OAuthError","title":"OAuthError","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>Error codes, according to the OAuth 2.0 specification, are presented as ASCII strings from the list specified in the specification.</p> Source <p>trueconf.com/docs/chatbot-connector/en/objects/#oauth-error</p>"},{"location":"reference/Enums/#trueconf.enums.OAuthError.INVALID_CLIENT","title":"INVALID_CLIENT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>INVALID_CLIENT = 'invalid_client'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.OAuthError.INVALID_GRANT","title":"INVALID_GRANT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>INVALID_GRANT = 'invalid_grant'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.OAuthError.INVALID_REQUEST","title":"INVALID_REQUEST  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>INVALID_REQUEST = 'invalid_request'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.OAuthError.UNSUPORTED_GRANT_TYPE","title":"UNSUPORTED_GRANT_TYPE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>UNSUPORTED_GRANT_TYPE = 'unsupported_grant_type'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ParseMode","title":"ParseMode","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>Formatting options</p> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#message-formatting</p>"},{"location":"reference/Enums/#trueconf.enums.ParseMode.HTML","title":"HTML  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>HTML = 'html'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ParseMode.MARKDOWN","title":"MARKDOWN  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MARKDOWN = 'markdown'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.ParseMode.TEXT","title":"TEXT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>TEXT = 'text'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.SurveyType","title":"SurveyType","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p>"},{"location":"reference/Enums/#trueconf.enums.SurveyType.ANONYMOUS","title":"ANONYMOUS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ANONYMOUS = '{{Anonymous survey}}'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.SurveyType.NON_ANONYMOUS","title":"NON_ANONYMOUS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>NON_ANONYMOUS = '{{Survey}}'\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.UpdateType","title":"UpdateType","text":"<p>               Bases: <code>int</code>, <code>Enum</code></p> <p>There are three types of messages. Only REQUEST and RESPONSE are applicable.</p> Source <p>trueconf.com/docs/chatbot-connector/en/objects/#message-type</p>"},{"location":"reference/Enums/#trueconf.enums.UpdateType.REQUEST","title":"REQUEST  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>REQUEST = 1\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.UpdateType.RESERVED","title":"RESERVED  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>RESERVED = 0\n</code></pre>"},{"location":"reference/Enums/#trueconf.enums.UpdateType.RESPONSE","title":"RESPONSE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>RESPONSE = 2\n</code></pre>"},{"location":"reference/Router/","title":"Class <code>Router</code>","text":"<p>Here is the reference information for the <code>Router</code> class, including all its parameters, attributes, and methods. You can import the <code>Router</code> class directly from the <code>trueconf</code> package:</p> <pre><code>from trueconf import Router\n</code></pre>"},{"location":"reference/Router/#trueconf.Router","title":"trueconf.Router","text":"<pre><code>Router(name=None, stop_on_first=True)\n</code></pre> <p>Event router for handling incoming events in a structured and extensible way.</p> <p>A <code>Router</code> allows you to register event handlers with specific filters, such as message types, chat events, or custom logic.</p> <p>You can also include nested routers using <code>include_router()</code> to build modular and reusable event structures.</p> <p>Handlers can be registered for:</p> <ul> <li>Messages (<code>@&lt;router&gt;.message(...)</code>)</li> <li>Chat creation events (<code>@&lt;router&gt;.created_personal_chat()</code>, <code>@&lt;router&gt;.created_group_chat()</code>, <code>@&lt;router&gt;.created_channel()</code>)</li> <li>Participant events (<code>@&lt;router&gt;.added_chat_participant()</code>, <code>@&lt;router&gt;.removed_chat_participant()</code>)</li> <li>Message lifecycle events (<code>@&lt;router&gt;.edited_message()</code>, <code>@&lt;router&gt;.removed_message()</code>)</li> <li>File upload events (<code>@&lt;router&gt;.uploading_progress()</code>)</li> <li>Removed chats (<code>@&lt;router&gt;.removed_chat()</code>)</li> </ul> <p>Example:</p> <pre><code>router = Router()\n\n@router.message(F.text == \"hello\")\nasync def handle_hello(msg: Message):\n    await msg.answer(\"Hi there!\")\n</code></pre> <p>If you have multiple routers, use <code>.include_router()</code> to add them to a parent router.</p>"},{"location":"reference/Router/#trueconf.Router.name","title":"name  <code>instance-attribute</code>","text":"<pre><code>name = name or hex(id(self))\n</code></pre>"},{"location":"reference/Router/#trueconf.Router.stop_on_first","title":"stop_on_first  <code>instance-attribute</code>","text":"<pre><code>stop_on_first = stop_on_first\n</code></pre>"},{"location":"reference/Router/#trueconf.Router.added_chat_participant","title":"added_chat_participant","text":"<pre><code>added_chat_participant(*filters)\n</code></pre> <p>Register a handler when a participant is added to a chat.</p>"},{"location":"reference/Router/#trueconf.Router.changed_participant_role","title":"changed_participant_role","text":"<pre><code>changed_participant_role(*filters)\n</code></pre> <p>Requires TrueConf Server 5.5.2+ Registers a handler for participant role change events in chats.</p> <p>This handler is triggered when a user's role is changed in a personal chat, group chat, channel, or conference chat. Used with the <code>ChangedParticipantRole</code> event type.</p> <p>Parameters:</p> Name Type Description Default <code>*filters</code> <code>FilterLike</code> <p>Optional filters to apply to the event. Multiple filters can be specified.</p> <code>()</code> <p>Returns:</p> Name Type Description <code>Callable</code> <p>A decorator function for registering the handler.</p> Example <pre><code>from trueconf.enums import ChatParticipantRole as role\nfrom trueconf.types import ChangedParticipantRole\n\n@router.changed_participant_role()\nasync def on_role_changed(event: ChangedParticipantRole):\n    if event.role == role.admin:\n        print(f\"{event.user_id} has been promoted to admin in chat {event.chat_id}\")\n</code></pre>"},{"location":"reference/Router/#trueconf.Router.created_channel","title":"created_channel","text":"<pre><code>created_channel(*filters)\n</code></pre> <p>Register a handler for channel creation events.</p>"},{"location":"reference/Router/#trueconf.Router.created_favorites_chat","title":"created_favorites_chat","text":"<pre><code>created_favorites_chat(*filters)\n</code></pre> <p>Requires TrueConf Server 5.5.2+. Register a handler for favorites chat creation events.</p>"},{"location":"reference/Router/#trueconf.Router.created_group_chat","title":"created_group_chat","text":"<pre><code>created_group_chat(*filters)\n</code></pre> <p>Register a handler for group chat creation events.</p>"},{"location":"reference/Router/#trueconf.Router.created_personal_chat","title":"created_personal_chat","text":"<pre><code>created_personal_chat(*filters)\n</code></pre> <p>Register a handler for personal chat creation events.</p>"},{"location":"reference/Router/#trueconf.Router.edited_message","title":"edited_message","text":"<pre><code>edited_message(*filters)\n</code></pre> <p>Register a handler for message edit events.</p>"},{"location":"reference/Router/#trueconf.Router.event","title":"event","text":"<pre><code>event(method, *filters)\n</code></pre> <p>Register a handler for a generic event type, filtered by method name.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; @r.event(F.method == \"SendMessage\")\n&gt;&gt;&gt; async def handle_message(msg: Message): ...\n</code></pre>"},{"location":"reference/Router/#trueconf.Router.include_router","title":"include_router","text":"<pre><code>include_router(router)\n</code></pre> <p>Include a child router for hierarchical event routing.</p>"},{"location":"reference/Router/#trueconf.Router.message","title":"message","text":"<pre><code>message(*filters)\n</code></pre> <p>Register a handler for incoming <code>Message</code> events.</p>"},{"location":"reference/Router/#trueconf.Router.removed_chat","title":"removed_chat","text":"<pre><code>removed_chat(*filters)\n</code></pre> <p>Register a handler when a chat is removed.</p>"},{"location":"reference/Router/#trueconf.Router.removed_chat_participant","title":"removed_chat_participant","text":"<pre><code>removed_chat_participant(*filters)\n</code></pre> <p>Register a handler when a participant is removed from a chat.</p>"},{"location":"reference/Router/#trueconf.Router.removed_message","title":"removed_message","text":"<pre><code>removed_message(*filters)\n</code></pre> <p>Register a handler for message deletion events.</p>"},{"location":"reference/Router/#trueconf.Router.uploading_progress","title":"uploading_progress","text":"<pre><code>uploading_progress(*filters)\n</code></pre> <p>Register a handler for file uploading progress events.</p>"},{"location":"reference/Types/","title":"Types","text":"<p>You can import all types at once:</p> <pre><code>from trueconf.types import *\n</code></pre>"},{"location":"reference/Types/#trueconf.types.AddedChatParticipant","title":"trueconf.types.AddedChatParticipant  <code>dataclass</code>","text":"<pre><code>AddedChatParticipant(timestamp, chat_id, user_id, added_by)\n</code></pre> <p>               Bases: <code>BoundToBot</code>, <code>DataClassDictMixin</code></p> <p>Event type: a new participant was added to a chat.</p> <p>This object is received in the handler when a user is added to a personal chat, group chat, channel, or conference chat.</p> Notes <p>This class is used as the event type in handler functions decorated with <code>@&lt;router&gt;.added_chat_participant()</code>.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#addedChatParticipant</p> <p>Attributes:</p> Name Type Description <code>timestamp</code> <code>int</code> <p>Unix timestamp (milliseconds) of when the event occurred.</p> <code>chat_id</code> <code>str</code> <p>Unique identifier of the chat where the participant was added.</p> <code>user_id</code> <code>str</code> <p>TrueConf ID of the participant who was added.</p> <code>added_by</code> <code>EnvelopeAuthor</code> <p>Information about the user who added the participant.</p> <p>Examples:</p> <pre><code>from trueconf.types import AddedChatParticipant\n\n@&lt;router&gt;.added_chat_participant()\nasync def on_added(event: AddedChatParticipant):\n    print(event.user_id)\n</code></pre>"},{"location":"reference/Types/#trueconf.types.AddedChatParticipant.added_by","title":"added_by  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>added_by = field(metadata={'alias': 'addedBy'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.AddedChatParticipant.chat_id","title":"chat_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>chat_id = field(metadata={'alias': 'chatId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.AddedChatParticipant.timestamp","title":"timestamp  <code>instance-attribute</code>","text":"<pre><code>timestamp\n</code></pre>"},{"location":"reference/Types/#trueconf.types.AddedChatParticipant.user_id","title":"user_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>user_id = field(metadata={'alias': 'userId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.ChangedParticipantRole","title":"trueconf.types.ChangedParticipantRole  <code>dataclass</code>","text":"<pre><code>ChangedParticipantRole(timestamp, role, chat_id, user_id)\n</code></pre> <p>               Bases: <code>BoundToBot</code>, <code>DataClassDictMixin</code></p> <p>Event type: a participant's role was changed in a chat.</p> <p>This object is received in the handler when a participant's role is changed in a personal chat, group chat, channel, or conference chat.</p> Notes <p>This class is used as the event type in handler functions decorated with <code>@&lt;router&gt;.changed_chat_participant_role()</code>.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#changedParticipantRole</p> <p>Attributes:</p> Name Type Description <code>timestamp</code> <code>int</code> <p>Unix timestamp (in milliseconds) when the role change occurred.</p> <code>role</code> <code>str</code> <p>New role assigned to the participant.</p> <code>chat_id</code> <code>str</code> <p>Identifier of the chat where the role change occurred.</p> <code>user_id</code> <code>str</code> <p>TrueConf ID of the participant whose role was changed.</p> Example <pre><code>from trueconf.types import ChangedParticipantRole\n\n@router.changed_chat_participant_role()\nasync def on_role_changed(event: ChangedParticipantRole):\n    print(f\"User {event.user_id} now has role {event.role} in chat {event.chat_id}\")\n</code></pre>"},{"location":"reference/Types/#trueconf.types.ChangedParticipantRole.chat_id","title":"chat_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>chat_id = field(metadata={'alias': 'chatId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.ChangedParticipantRole.role","title":"role  <code>instance-attribute</code>","text":"<pre><code>role\n</code></pre>"},{"location":"reference/Types/#trueconf.types.ChangedParticipantRole.timestamp","title":"timestamp  <code>instance-attribute</code>","text":"<pre><code>timestamp\n</code></pre>"},{"location":"reference/Types/#trueconf.types.ChangedParticipantRole.user_id","title":"user_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>user_id = field(metadata={'alias': 'userId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedChannel","title":"trueconf.types.CreatedChannel  <code>dataclass</code>","text":"<pre><code>CreatedChannel(chat_id, title, chat_type, last_message, unread_messages)\n</code></pre> <p>               Bases: <code>BoundToBot</code>, <code>DataClassDictMixin</code></p> <p>Event type: a new channel chat was created.</p> <p>This object is received in the handler when a channel is created in TrueConf.</p> Notes <p>This class is used as the event type in handler functions decorated with <code>@&lt;router&gt;.created_channel()</code>.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#createdChannel</p> <p>Attributes:</p> Name Type Description <code>chat_id</code> <code>str</code> <p>Unique identifier of the created channel.</p> <code>title</code> <code>str</code> <p>Title of the channel.</p> <code>chat_type</code> <code>ChatType</code> <p>Type of the chat (should be <code>channel</code>).</p> <code>last_message</code> <code>LastMessage | None</code> <p>The last message in the channel, if available.</p> <code>unread_messages</code> <code>int</code> <p>Number of unread messages in the channel.</p> <p>Examples:</p> <pre><code>from trueconf.types import CreatedChannel\n\n@&lt;router&gt;.created_channel()\nasync def on_created(event: CreatedChannel):\n    print(f\"Channel {event.title} created with id {event.chat_id}\")\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedChannel.chat_id","title":"chat_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>chat_id = field(metadata={'alias': 'chatId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedChannel.chat_type","title":"chat_type  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>chat_type = field(metadata={'alias': 'chatType'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedChannel.last_message","title":"last_message  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>last_message = field(metadata={'alias': 'lastMessage'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedChannel.title","title":"title  <code>instance-attribute</code>","text":"<pre><code>title\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedChannel.unread_messages","title":"unread_messages  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>unread_messages = field(metadata={'alias': 'unreadMessages'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedGroupChat","title":"trueconf.types.CreatedGroupChat  <code>dataclass</code>","text":"<pre><code>CreatedGroupChat(chat_id, title, chat_type, last_message, unread_messages)\n</code></pre> <p>               Bases: <code>BoundToBot</code>, <code>DataClassDictMixin</code></p> <p>Event type: a new group chat was created.</p> <p>This object is received in the handler when a group chat is created in TrueConf.</p> Notes <p>This class is used as the event type in handler functions decorated with <code>@&lt;router&gt;.created_group_chat()</code>.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#createdGroupChat</p> <p>Attributes:</p> Name Type Description <code>chat_id</code> <code>str</code> <p>Unique identifier of the group chat.</p> <code>title</code> <code>str</code> <p>Title of the group chat.</p> <code>chat_type</code> <code>ChatType</code> <p>Type of the chat (should be <code>group</code>).</p> <code>last_message</code> <code>LastMessage | None</code> <p>The last message in the chat, if available.</p> <code>unread_messages</code> <code>int</code> <p>Number of unread messages in the group chat.</p> <p>Examples:</p> <pre><code>from trueconf.types import CreatedGroupChat\n\n@&lt;router&gt;.created_group_chat()\nasync def on_created(event: CreatedGroupChat):\n    print(f\"Group chat {event.title} created with id {event.chat_id}\")\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedGroupChat.chat_id","title":"chat_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>chat_id = field(metadata={'alias': 'chatId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedGroupChat.chat_type","title":"chat_type  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>chat_type = field(metadata={'alias': 'chatType'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedGroupChat.last_message","title":"last_message  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>last_message = field(metadata={'alias': 'lastMessage'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedGroupChat.title","title":"title  <code>instance-attribute</code>","text":"<pre><code>title\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedGroupChat.unread_messages","title":"unread_messages  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>unread_messages = field(metadata={'alias': 'unreadMessages'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedPersonalChat","title":"trueconf.types.CreatedPersonalChat  <code>dataclass</code>","text":"<pre><code>CreatedPersonalChat(chat_id, title, chat_type, last_message, unread_messages)\n</code></pre> <p>               Bases: <code>BoundToBot</code>, <code>DataClassDictMixin</code></p> <p>Event type: a new personal chat was created.</p> <p>This object is received in the handler when a personal chat is created in TrueConf.</p> Notes <p>This class is used as the event type in handler functions decorated with <code>@&lt;router&gt;.created_personal_chat()</code>.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#createdP2PChat</p> <p>Attributes:</p> Name Type Description <code>chat_id</code> <code>str</code> <p>Unique identifier of the personal chat.</p> <code>title</code> <code>str</code> <p>Title of the chat (usually the participant\u2019s name).</p> <code>chat_type</code> <code>ChatType</code> <p>Type of the chat (should be <code>p2p</code>).</p> <code>last_message</code> <code>LastMessage | None</code> <p>The last message in the chat, if available.</p> <code>unread_messages</code> <code>int</code> <p>Number of unread messages in the personal chat.</p> <p>Examples:</p> <pre><code>from trueconf.types import CreatedPersonalChat\n\n@&lt;router&gt;.created_personal_chat()\nasync def on_created(event: CreatedPersonalChat):\n    print(f\"Personal chat created with id {event.chat_id}\")\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedPersonalChat.chat_id","title":"chat_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>chat_id = field(metadata={'alias': 'chatId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedPersonalChat.chat_type","title":"chat_type  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>chat_type = field(metadata={'alias': 'chatType'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedPersonalChat.last_message","title":"last_message  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>last_message = field(metadata={'alias': 'lastMessage'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedPersonalChat.title","title":"title  <code>instance-attribute</code>","text":"<pre><code>title\n</code></pre>"},{"location":"reference/Types/#trueconf.types.CreatedPersonalChat.unread_messages","title":"unread_messages  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>unread_messages = field(metadata={'alias': 'unreadMessages'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.EditedMessage","title":"trueconf.types.EditedMessage  <code>dataclass</code>","text":"<pre><code>EditedMessage(timestamp, content, chat_id)\n</code></pre> <p>               Bases: <code>BoundToBot</code>, <code>DataClassDictMixin</code></p> <p>Event type: a message was edited.</p> <p>This object is received in the handler when a previously sent message is edited in a chat.</p> Notes <p>This class is used as the event type in handler functions decorated with <code>@&lt;router&gt;.edited_message()</code>.</p> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#editMessage</p> <p>Attributes:</p> Name Type Description <code>timestamp</code> <code>int</code> <p>Unix timestamp (milliseconds) of when the edit occurred.</p> <code>content</code> <code>TextContent</code> <p>The updated content of the edited message.</p> <code>chat_id</code> <code>str</code> <p>Unique identifier of the chat where the message was edited.</p> <p>Examples:</p> <pre><code>from trueconf.types import EditedMessage\n\n@&lt;router&gt;.edited_message()\nasync def on_edited(event: EditedMessage):\n    print(f\"Message in chat {event.chat_id} was edited: {event.content.text}\")\n</code></pre>"},{"location":"reference/Types/#trueconf.types.EditedMessage.chat_id","title":"chat_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>chat_id = field(metadata={'alias': 'chatId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.EditedMessage.content","title":"content  <code>instance-attribute</code>","text":"<pre><code>content\n</code></pre>"},{"location":"reference/Types/#trueconf.types.EditedMessage.timestamp","title":"timestamp  <code>instance-attribute</code>","text":"<pre><code>timestamp\n</code></pre>"},{"location":"reference/Types/#trueconf.types.InputFile","title":"trueconf.types.InputFile","text":"<pre><code>InputFile(filename=None, file_size=None, mimetype=None)\n</code></pre> <p>               Bases: <code>ABC</code></p> <p>Base abstract class representing uploadable files.</p> <p>This class defines a common interface for all file types that can be uploaded to the TrueConf Server. It should not be used directly. Instead, use one of its subclasses:</p> <ul> <li><code>BufferedInputFile</code> \u2014 for in-memory byte data</li> <li><code>FSInputFile</code> \u2014 for files from the local filesystem</li> <li><code>URLInputFile</code> \u2014 for downloading files from a URL</li> </ul> <p>Each subclass implements the <code>read()</code> and <code>clone()</code> methods required for asynchronous uploads and reusability of the same file object.</p> Source <p>trueconf.com/docs/chatbot-connector/en/files/#upload-file-to-server-storage</p> <p>Parameters:</p> Name Type Description Default <code>filename</code> <code>str | None</code> <p>Name of the file to display when sending.</p> <code>None</code> <code>file_size</code> <code>int | None</code> <p>File size in bytes (optional).</p> <code>None</code> <code>mimetype</code> <code>str | None</code> <p>MIME type of the file. Can be detected automatically.</p> <code>None</code> Abstract Methods <p>read(): Asynchronously reads the file content. clone(): Creates a new copy of the file object. Useful for reuse (e.g., preview uploads).</p> Example <pre><code>file = FSInputFile(\"example.pdf\")\nawait bot.send_document(chat_id=\"...\", file=file)\n</code></pre>"},{"location":"reference/Types/#trueconf.types.InputFile.file_size","title":"file_size  <code>instance-attribute</code>","text":"<pre><code>file_size = file_size\n</code></pre>"},{"location":"reference/Types/#trueconf.types.InputFile.filename","title":"filename  <code>instance-attribute</code>","text":"<pre><code>filename = filename\n</code></pre>"},{"location":"reference/Types/#trueconf.types.InputFile.mimetype","title":"mimetype  <code>instance-attribute</code>","text":"<pre><code>mimetype = mimetype\n</code></pre>"},{"location":"reference/Types/#trueconf.types.InputFile.clone","title":"clone  <code>abstractmethod</code>","text":"<pre><code>clone()\n</code></pre>"},{"location":"reference/Types/#trueconf.types.InputFile.read","title":"read  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>read()\n</code></pre>"},{"location":"reference/Types/#trueconf.types.BufferedInputFile","title":"trueconf.types.BufferedInputFile","text":"<pre><code>BufferedInputFile(file, filename, file_size=None, mimetype=None)\n</code></pre> <p>               Bases: <code>InputFile</code></p> <p>Represents a file uploaded from a bytes buffer.</p> <p>This class is useful when the file is already available as a <code>bytes</code> object, for example, if it was retrieved from a database, memory, or downloaded from an external source. Automatically detects MIME type and file size if not provided.</p> Example <pre><code>file = BufferedInputFile(file=data_bytes, filename=\"example.txt\")\nawait bot.send_document(chat_id=\"...\", file=file)\n</code></pre> Note <p>Use <code>BufferedInputFile.from_file(...)</code> for convenient file loading from disk.</p> <p>Initializes a file from a bytes buffer.</p> <p>Parameters:</p> Name Type Description Default <code>file</code> <code>bytes</code> <p>Raw file content in bytes.</p> required <code>filename</code> <code>str</code> <p>The name of the file.</p> required <code>file_size</code> <code>Optional[int]</code> <p>Size of the file in bytes. Auto-detected if not specified.</p> <code>None</code> <code>mimetype</code> <code>Optional[str]</code> <p>MIME type of the file. Auto-detected if not specified.</p> <code>None</code>"},{"location":"reference/Types/#trueconf.types.BufferedInputFile.data","title":"data  <code>instance-attribute</code>","text":"<pre><code>data = file\n</code></pre>"},{"location":"reference/Types/#trueconf.types.BufferedInputFile.file_size","title":"file_size  <code>instance-attribute</code>","text":"<pre><code>file_size = file_size\n</code></pre>"},{"location":"reference/Types/#trueconf.types.BufferedInputFile.filename","title":"filename  <code>instance-attribute</code>","text":"<pre><code>filename = filename\n</code></pre>"},{"location":"reference/Types/#trueconf.types.BufferedInputFile.mimetype","title":"mimetype  <code>instance-attribute</code>","text":"<pre><code>mimetype = mimetype\n</code></pre>"},{"location":"reference/Types/#trueconf.types.BufferedInputFile.clone","title":"clone","text":"<pre><code>clone()\n</code></pre> <p>Creates a clone of the current file object.</p> <p>This method is useful when the same file needs to be reused (e.g., as a preview), while keeping the original instance intact.</p> <p>Returns:</p> Name Type Description <code>BufferedInputFile</code> <code>BufferedInputFile</code> <p>A new instance with identical content.</p>"},{"location":"reference/Types/#trueconf.types.BufferedInputFile.from_file","title":"from_file  <code>classmethod</code>","text":"<pre><code>from_file(path, filename=None, file_size=None, mimetype=None)\n</code></pre> <p>Creates a <code>BufferedInputFile</code> from a file on disk.</p> <p>This is a convenient way to load a file into memory if it needs to be reused or processed before sending.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>str | Path</code> <p>Path to the local file.</p> required <code>filename</code> <code>Optional[str]</code> <p>File name to propagate. Defaults to the name extracted from path.</p> <code>None</code> <code>file_size</code> <code>Optional[int]</code> <p>File size in bytes. Auto-detected if not specified.</p> <code>None</code> <code>mimetype</code> <code>Optional[str]</code> <p>MIME type of the file. Auto-detected if not specified.</p> <code>None</code> <p>Returns:</p> Name Type Description <code>BufferedInputFile</code> <code>BufferedInputFile</code> <p>A new instance ready for upload.</p>"},{"location":"reference/Types/#trueconf.types.BufferedInputFile.read","title":"read  <code>async</code>","text":"<pre><code>read()\n</code></pre> <p>Asynchronously returns the file content as a <code>BytesIO</code> stream.</p> <p>Returns:</p> Name Type Description <code>BytesIO</code> <p>A stream containing the file content.</p>"},{"location":"reference/Types/#trueconf.types.FSInputFile","title":"trueconf.types.FSInputFile","text":"<pre><code>FSInputFile(path, filename=None, file_size=None, mimetype=None)\n</code></pre> <p>               Bases: <code>InputFile</code></p> <p>Represents a file uploaded from the local filesystem.</p> <p>Used for uploading documents, images, or any other files directly from disk. Automatically detects the file name, size, and MIME type when not explicitly provided.</p> Example <pre><code>file = FSInputFile(\"path/to/file.zip\")\nawait bot.send_document(chat_id=\"...\", file=file)\n</code></pre> <p>Initializes an <code>FSInputFile</code> instance from a local file.</p> <p>If not provided, <code>filename</code>, <code>file_size</code>, and <code>mimetype</code> are automatically detected:</p> <ul> <li><code>filename</code> is extracted from the file path.</li> <li><code>file_size</code> is determined via <code>os.path.getsize()</code>.</li> <li><code>mimetype</code> is detected from the first 2048 bytes of the file content (using <code>python-magic</code> if available).</li> </ul> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>str | Path</code> <p>Path to the local file.</p> required <code>filename</code> <code>Optional[str]</code> <p>File name to be propagated in the upload.</p> <code>None</code> <code>file_size</code> <code>Optional[int]</code> <p>File size in bytes.</p> <code>None</code> <code>mimetype</code> <code>Optional[str]</code> <p>File MIME type.</p> <code>None</code>"},{"location":"reference/Types/#trueconf.types.FSInputFile.file_size","title":"file_size  <code>instance-attribute</code>","text":"<pre><code>file_size = file_size\n</code></pre>"},{"location":"reference/Types/#trueconf.types.FSInputFile.filename","title":"filename  <code>instance-attribute</code>","text":"<pre><code>filename = filename\n</code></pre>"},{"location":"reference/Types/#trueconf.types.FSInputFile.mimetype","title":"mimetype  <code>instance-attribute</code>","text":"<pre><code>mimetype = mimetype\n</code></pre>"},{"location":"reference/Types/#trueconf.types.FSInputFile.path","title":"path  <code>instance-attribute</code>","text":"<pre><code>path = path\n</code></pre>"},{"location":"reference/Types/#trueconf.types.FSInputFile.clone","title":"clone","text":"<pre><code>clone()\n</code></pre> <p>Creates a clone of the current <code>FSInputFile</code> instance.</p> <p>Useful when the same file needs to be reused, for example, when sending preview images. The cloned object retains the same path, name, size, and MIME type but is a separate instance in memory.</p> <p>Returns:</p> Name Type Description <code>FSInputFile</code> <code>FSInputFile</code> <p>A new instance of <code>FSInputFile</code> with identical properties.</p>"},{"location":"reference/Types/#trueconf.types.FSInputFile.read","title":"read  <code>async</code>","text":"<pre><code>read()\n</code></pre> <p>Asynchronously reads the file content from the local filesystem.</p> <p>Returns:</p> Name Type Description <code>bytes</code> <p>The file content as raw bytes.</p>"},{"location":"reference/Types/#trueconf.types.URLInputFile","title":"trueconf.types.URLInputFile","text":"<pre><code>URLInputFile(url, headers=None, filename=None, file_size=None, mimetype=None, timeout=30)\n</code></pre> <p>               Bases: <code>InputFile</code></p> <p>Represents a file to be downloaded and uploaded from a remote URL.</p> <p>Used for uploading files from external sources (e.g., public file links, APIs). Automatically handles MIME type detection and file size parsing from HTTP headers.</p> Example <pre><code>file = URLInputFile(\"https://example.com/file.pdf\")\nawait bot.send_document(chat_id=\"...\", file=file)\n</code></pre> <p>Initializes a <code>URLInputFile</code> instance from a remote URL.</p> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>URL of the file to download.</p> required <code>headers</code> <code>Optional[Dict[str, Any]]</code> <p>Optional HTTP headers for the request.</p> <code>None</code> <code>filename</code> <code>Optional[str]</code> <p>Optional file name to propagate in the upload.</p> <code>None</code> <code>file_size</code> <code>Optional[int]</code> <p>Optional file size in bytes.</p> <code>None</code> <code>mimetype</code> <code>Optional[str]</code> <p>Optional MIME type of the file.</p> <code>None</code> <code>timeout</code> <code>int</code> <p>Timeout (in seconds) for the HTTP request.</p> <code>30</code>"},{"location":"reference/Types/#trueconf.types.URLInputFile.file_size","title":"file_size  <code>instance-attribute</code>","text":"<pre><code>file_size = file_size\n</code></pre>"},{"location":"reference/Types/#trueconf.types.URLInputFile.filename","title":"filename  <code>instance-attribute</code>","text":"<pre><code>filename = filename\n</code></pre>"},{"location":"reference/Types/#trueconf.types.URLInputFile.headers","title":"headers  <code>instance-attribute</code>","text":"<pre><code>headers = headers\n</code></pre>"},{"location":"reference/Types/#trueconf.types.URLInputFile.mimetype","title":"mimetype  <code>instance-attribute</code>","text":"<pre><code>mimetype = mimetype\n</code></pre>"},{"location":"reference/Types/#trueconf.types.URLInputFile.timeout","title":"timeout  <code>instance-attribute</code>","text":"<pre><code>timeout = timeout\n</code></pre>"},{"location":"reference/Types/#trueconf.types.URLInputFile.url","title":"url  <code>instance-attribute</code>","text":"<pre><code>url = url\n</code></pre>"},{"location":"reference/Types/#trueconf.types.URLInputFile.clone","title":"clone","text":"<pre><code>clone()\n</code></pre> <p>Creates a clone of the current <code>URLInputFile</code> instance.</p> <p>Useful when the same file needs to be reused (e.g., sending a preview). The cloned object retains the same URL, headers, and metadata.</p> <p>Returns:</p> Name Type Description <code>URLInputFile</code> <code>URLInputFile</code> <p>A new instance with identical parameters.</p>"},{"location":"reference/Types/#trueconf.types.URLInputFile.prepare","title":"prepare  <code>async</code>","text":"<pre><code>prepare()\n</code></pre> <p>Prepares file metadata by sending a HEAD request to the specified URL.</p> <p>This method attempts to detect:</p> <ul> <li>MIME type from the <code>Content-Type</code> header.</li> <li>File size from the <code>Content-Length</code> header.</li> <li>File name from the <code>Content-Disposition</code> header or URL path.</li> </ul> <p>Raises:</p> Type Description <code>ValueError</code> <p>If the server does not provide a valid <code>Content-Length</code>.</p>"},{"location":"reference/Types/#trueconf.types.URLInputFile.read","title":"read  <code>async</code>","text":"<pre><code>read()\n</code></pre> <p>Downloads the file content from the remote URL.</p> <p>Performs a full GET request and returns the content as raw bytes.</p> <p>Returns:</p> Name Type Description <code>bytes</code> <p>File content.</p>"},{"location":"reference/Types/#trueconf.types.Message","title":"trueconf.types.Message  <code>dataclass</code>","text":"<pre><code>Message(timestamp, type, author, box, content, message_id, chat_id, is_edited, reply_message_id=None)\n</code></pre> <p>               Bases: <code>BoundToBot</code>, <code>DataClassDictMixin</code></p> <p>Represents a single chat message within TrueConf Chatbot Connector.</p> <p>The <code>Message</code> object is automatically created for each incoming update and contains metadata (author, chat, timestamp, type) along with the actual message content. It also provides helper properties and shortcut methods to interact with the message (e.g., replying, forwarding, deleting, sending media files).</p> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#sendMessage</p> <p>Attributes:</p> Name Type Description <code>timestamp</code> <code>int</code> <p>Unix timestamp of the message.</p> <code>type</code> <code>MessageType</code> <p>Type of the message (e.g., TEXT, ATTACHMENT).</p> <code>author</code> <code>EnvelopeAuthor</code> <p>Information about the user who sent the message.</p> <code>box</code> <code>EnvelopeBox</code> <p>Information about the chat (box) where the message was sent.</p> <code>message_id</code> <code>str</code> <p>Unique identifier of the message.</p> <code>chat_id</code> <code>str</code> <p>Unique identifier of the chat where the message was sent.</p> <code>is_edited</code> <code>bool</code> <p>Indicates whether the message was edited.</p> <code>reply_message_id</code> <code>Optional[str]</code> <p>Identifier of the message this one replies to.</p> <code>from_user</code> <code>EnvelopeAuthor</code> <p>Shortcut for accessing the message author.</p> <code>content_type</code> <code>MessageType</code> <p>Returns the type of the message.</p> <code>text</code> <code>Optional[str]</code> <p>Returns the message text if it contains text, else None.</p> <code>document</code> <code>Optional[Document]</code> <p>Returns a document attachment if the message contains a non-media file (not photo, video, sticker).</p> <code>photo</code> <code>Optional[Photo]</code> <p>Returns a photo attachment if available.</p> <code>video</code> <code>Optional[Video]</code> <p>Returns a video attachment if available.</p> <code>sticker</code> <code>Optional[Sticker]</code> <p>Returns a sticker attachment if available.</p> <p>Methods:</p> Name Description <code>answer</code> <p>Sends a text message in the same chat.</p> <code>reply</code> <p>Sends a reply message referencing the current one.</p> <code>forward</code> <p>Forwards the current message to another chat.</p> <code>copy_to</code> <p>Sends a copy of the current message (text-only).</p> <code>answer_photo</code> <p>Sends a photo to the current chat.</p> <code>answer_document</code> <p>Sends a document to the current chat.</p> <code>answer_sticker</code> <p>Sends a sticker to the current chat.</p> <code>delete</code> <p>Deletes the current message from the chat.</p>"},{"location":"reference/Types/#trueconf.types.Message.author","title":"author  <code>instance-attribute</code>","text":"<pre><code>author\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Message.box","title":"box  <code>instance-attribute</code>","text":"<pre><code>box\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Message.chat_id","title":"chat_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>chat_id = field(metadata={'alias': 'chatId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Message.content","title":"content  <code>instance-attribute</code>","text":"<pre><code>content\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Message.content_type","title":"content_type  <code>property</code>","text":"<pre><code>content_type\n</code></pre> <p>Returns the type of the current message content.</p> <p>Returns:</p> Name Type Description <code>MessageType</code> <code>MessageType</code> <p>Message content type (e.g., TEXT, ATTACHMENT).</p>"},{"location":"reference/Types/#trueconf.types.Message.document","title":"document  <code>property</code>","text":"<pre><code>document\n</code></pre> <p>Returns the attached document if the message contains a non-media file.</p> <p>Use this property only for documents that are not photos, videos, or stickers. For media attachments, use the corresponding properties: <code>photo</code>, <code>video</code>, or <code>sticker</code>. If you need to handle any attached file (including media), use <code>message.content</code> directly.</p> <p>Returns:</p> Type Description <code>Optional['Document']</code> <p>Optional[Document]: Document attachment bound to the bot, or None if not applicable.</p>"},{"location":"reference/Types/#trueconf.types.Message.from_user","title":"from_user  <code>property</code>","text":"<pre><code>from_user\n</code></pre> <p>Returns the author of the current message.</p> <p>Returns:</p> Name Type Description <code>EnvelopeAuthor</code> <code>EnvelopeAuthor</code> <p>Shortcut for accessing the message author.</p>"},{"location":"reference/Types/#trueconf.types.Message.is_edited","title":"is_edited  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>is_edited = field(metadata={'alias': 'isEdited'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Message.message_id","title":"message_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>message_id = field(metadata={'alias': 'messageId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Message.photo","title":"photo  <code>property</code>","text":"<pre><code>photo\n</code></pre> <p>Returns the attached photo object if the current message contains an image.</p> <p>This is a shortcut for accessing photo metadata from image attachments.</p> <p>Returns:</p> Type Description <code>Optional['Photo']</code> <p>Optional[Photo]: A <code>Photo</code> object bound to the bot, or None if the message does not contain an image.</p>"},{"location":"reference/Types/#trueconf.types.Message.reply_message_id","title":"reply_message_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>reply_message_id = field(default=None, metadata={'alias': 'replyMessageId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Message.sticker","title":"sticker  <code>property</code>","text":"<pre><code>sticker\n</code></pre> <p>Returns the attached sticker object if the current message contains a sticker.</p> <p>Returns:</p> Type Description <code>Optional['Sticker']</code> <p>Optional[Sticker]: A <code>Sticker</code> object bound to the bot, or None if the message does not contain a sticker.</p>"},{"location":"reference/Types/#trueconf.types.Message.text","title":"text  <code>property</code>","text":"<pre><code>text\n</code></pre> <p>Returns the text of the current message if present.</p> <p>Returns:</p> Type Description <code>str | None</code> <p>Optional[str]: Message text, or None if the message has no text content.</p>"},{"location":"reference/Types/#trueconf.types.Message.timestamp","title":"timestamp  <code>instance-attribute</code>","text":"<pre><code>timestamp\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Message.type","title":"type  <code>instance-attribute</code>","text":"<pre><code>type\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Message.video","title":"video  <code>property</code>","text":"<pre><code>video\n</code></pre> <p>Returns the attached video object if the current message contains a video.</p> <p>This is a shortcut for accessing video metadata from video attachments.</p> <p>Returns:</p> Type Description <code>Optional['Video']</code> <p>Optional[Video]: A <code>Video</code> object bound to the bot, or None if the message does not contain a video.</p>"},{"location":"reference/Types/#trueconf.types.Message.answer","title":"answer  <code>async</code>","text":"<pre><code>answer(text, parse_mode=HTML)\n</code></pre> <p>Shortcut for the <code>send_message</code> method of the bot instance. Use this method to send a text message to the current chat.</p> Automatically fills the following attributes <ul> <li><code>chat_id</code></li> </ul> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#sendMessage</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>Text of the message to be sent.</p> required <code>parse_mode</code> <code>ParseMode | str</code> <p>Text formatting mode. Defaults to HTML.</p> <code>HTML</code> <p>Returns:</p> Name Type Description <code>SendMessageResponse</code> <code>object</code> <p>Object containing the result of the message delivery.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; @&lt;router&gt;.message()\n&gt;&gt;&gt; async def on_message(message:Message):\n&gt;&gt;&gt;     await message.answer(\"Hi, there!\")\n</code></pre> <pre><code>&gt;&gt;&gt; @&lt;router&gt;.message()\n&gt;&gt;&gt; async def on_message(message:Message):\n&gt;&gt;&gt;     await message.answer(\"Hi, **there!**\", parse_mode=ParseMode.MARKDOWN)\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Message.answer_document","title":"answer_document  <code>async</code>","text":"<pre><code>answer_document(file_path)\n</code></pre> <p>Shortcut for the <code>send_document</code> method of the bot instance. Use this method to send a document in response to the current message.</p> Automatically fills the following attributes <ul> <li><code>chat_id</code></li> </ul> Source <p>trueconf.com/docs/chatbot-connector/en/files/#working-with-files</p> <p>Parameters:</p> Name Type Description Default <code>file_path</code> <code>str</code> <p>Path to the document file.</p> required <p>Returns:</p> Name Type Description <code>SendFileResponse</code> <code>object</code> <p>Object containing the result of the document upload.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; @&lt;router&gt;.message()\n&gt;&gt;&gt; async def on_message(message:Message):\n&gt;&gt;&gt;     await message.answer_sticker(file_path='/path/to/file.webp')\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Message.answer_photo","title":"answer_photo  <code>async</code>","text":"<pre><code>answer_photo(file_path, preview_path)\n</code></pre> <p>Shortcut for the <code>send_photo</code> method of the bot instance. Use this method to send a photo in response to the current message.</p> Automatically fills the following attributes <ul> <li><code>chat_id</code></li> </ul> Source <p>trueconf.com/docs/chatbot-connector/en/files/#sending-an-image</p> <p>Parameters:</p> Name Type Description Default <code>file_path</code> <code>str</code> <p>Path to the image file (supported formats: <code>.jpg</code>, <code>.jpeg</code>, <code>.png</code>, <code>.webp</code>, <code>.bmp</code>, <code>.gif</code>, <code>.tiff</code>).</p> required <code>preview_path</code> <code>str | None</code> <p>Path to the preview image.</p> required <p>Returns:</p> Name Type Description <code>SendFileResponse</code> <code>object</code> <p>Object containing the result of the photo upload.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; @&lt;router&gt;.message()\n&gt;&gt;&gt; async def on_message(message:Message):\n&gt;&gt;&gt;     await message.answer_photo(file_path='/path/to/file.jpg', preview_path='/path/to/preview.jpg')\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Message.answer_sticker","title":"answer_sticker  <code>async</code>","text":"<pre><code>answer_sticker(file_path)\n</code></pre> <p>Shortcut for the <code>send_sticker</code> method of the bot instance. Use this method to send a sticker in response to the current message.</p> Automatically fills the following attributes <ul> <li><code>chat_id</code></li> </ul> Source <p>trueconf.com/docs/chatbot-connector/en/files/#upload-file-to-server-storage</p> <p>Parameters:</p> Name Type Description Default <code>file_path</code> <code>str</code> <p>Path to the sticker file (must be in WebP format).</p> required <p>Returns:</p> Name Type Description <code>SendFileResponse</code> <code>object</code> <p>Object containing the result of the sticker delivery.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; @&lt;router&gt;.message()\n&gt;&gt;&gt; async def on_message(message:Message):\n&gt;&gt;&gt;     await message.answer_sticker(file_path='/path/to/file.webp')\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Message.copy_to","title":"copy_to  <code>async</code>","text":"<pre><code>copy_to(chat_id)\n</code></pre> <p>Shortcut for the <code>send_message</code> method of the bot instance. Use this method to send a copy of the current message (without metadata or reply context) to another chat.</p> Automatically fills the following attributes <ul> <li><code>text</code></li> <li><code>parse_mode</code></li> </ul> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#sendMessage</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the target chat to send the copied message to.</p> required <p>Returns:</p> Name Type Description <code>SendMessageResponse</code> <code>object</code> <p>Object containing the result of the message delivery.</p>"},{"location":"reference/Types/#trueconf.types.Message.delete","title":"delete  <code>async</code>","text":"<pre><code>delete(for_all=False)\n</code></pre> <p>Shortcut for the <code>remove_message</code> method of the bot instance. Use this method to delete the current message from the chat.</p> Automatically fills the following attributes <ul> <li><code>message_id</code></li> </ul> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#removeMessage</p> <p>Parameters:</p> Name Type Description Default <code>for_all</code> <code>bool</code> <p>If True, delete the message for all participants. Defaults to False (deletes only for the bot).</p> <code>False</code> <p>Returns:</p> Name Type Description <code>RemoveMessageResponse</code> <code>object</code> <p>Object containing the result of the message deletion.</p>"},{"location":"reference/Types/#trueconf.types.Message.forward","title":"forward  <code>async</code>","text":"<pre><code>forward(chat_id)\n</code></pre> <p>Shortcut for the <code>forward_message</code> method of the bot instance. Use this method to forward the current message to another chat.</p> Automatically fills the following attributes <ul> <li><code>message_id</code></li> </ul> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#forwardMessage</p> <p>Parameters:</p> Name Type Description Default <code>chat_id</code> <code>str</code> <p>Identifier of the target chat to forward the message to.</p> required <p>Returns:</p> Name Type Description <code>ForwardMessageResponse</code> <code>object</code> <p>Object containing the result of the message forwarding.</p>"},{"location":"reference/Types/#trueconf.types.Message.reply","title":"reply  <code>async</code>","text":"<pre><code>reply(text, parse_mode=HTML)\n</code></pre> <p>Shortcut for the <code>reply_message</code> method of the bot instance. Use this method to send a reply message to the current chat.</p> Automatically fills the following attributes <ul> <li><code>chat_id</code></li> <li><code>reply_message_id</code></li> </ul> <p>Source: trueconf.com/docs/chatbot-connector/en/messages/#replyMessage</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>Text of the reply message.</p> required <code>parse_mode</code> <code>ParseMode | str</code> <p>Text formatting mode. Defaults to HTML.</p> <code>HTML</code> <p>Returns:</p> Name Type Description <code>SendMessageResponse</code> <code>object</code> <p>Object containing the result of the message delivery.</p>"},{"location":"reference/Types/#trueconf.types.Message.save_to_favorites","title":"save_to_favorites  <code>async</code>","text":"<pre><code>save_to_favorites(copy=False)\n</code></pre> <p>Saves the current message to the bot's \"Favorites\" chat.</p> <p>By default, the message is forwarded to the bot's personal Favorites chat. If <code>copy=True</code>, the message will be copied instead \u2014 only for text messages.</p> <p>Use this method to store important messages, logs, or media content in the bot\u2019s private space.</p> Notes <ul> <li>The Favorites chat is created automatically on first use.</li> <li><code>copy=True</code> only works for text messages and does not preserve metadata (like replies or sender info).</li> <li>Non-text messages with <code>copy=True</code> will be ignored with a warning.</li> </ul> <p>Parameters:</p> Name Type Description Default <code>copy</code> <code>bool</code> <p>If True, copies the message instead of forwarding it. Defaults to False.</p> <code>False</code> <p>Returns:</p> Type Description <code>object</code> <p>SendMessageResponse | ForwardMessageResponse | None:</p> <code>object</code> <p>Result of sending or forwarding the message. Returns <code>None</code> if copying is not supported for the message type.</p> Example <pre><code>@router.message()\nasync def on_message(msg: Message):\n    await msg.save_to_favorites()           # forwards message\n    await msg.save_to_favorites(copy=True)  # copies if possible\n</code></pre>"},{"location":"reference/Types/#trueconf.types.RemovedChat","title":"trueconf.types.RemovedChat  <code>dataclass</code>","text":"<pre><code>RemovedChat(chat_id)\n</code></pre> <p>               Bases: <code>BoundToBot</code>, <code>DataClassDictMixin</code></p> <p>Event type: a chat was removed.</p> <p>This object is received in the handler when a private, group, channel, or conference chat is deleted.</p> Notes <p>This class is used as the event type in handler functions decorated with <code>@&lt;router&gt;.removed_chat()</code>.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#removedChat</p> <p>Attributes:</p> Name Type Description <code>chat_id</code> <code>str</code> <p>Unique identifier of the chat that was removed.</p> <p>Examples:</p> <pre><code>from trueconf.types import RemovedChat\n\n@&lt;router&gt;.removed_chat()\nasync def on_removed(event: RemovedChat):\n    print(f\"Chat removed: {event.chat_id}\")\n</code></pre>"},{"location":"reference/Types/#trueconf.types.RemovedChat.chat_id","title":"chat_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>chat_id = field(metadata={'alias': 'chatId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.RemovedChatParticipant","title":"trueconf.types.RemovedChatParticipant  <code>dataclass</code>","text":"<pre><code>RemovedChatParticipant(timestamp, chat_id, user_id, removed_by)\n</code></pre> <p>               Bases: <code>BoundToBot</code>, <code>DataClassDictMixin</code></p> <p>Event type: a participant was removed from a chat.</p> <p>This object is received in the handler when a user is removed from a group, channel, or conference chat.</p> Notes <p>This class is used as the event type in handler functions decorated with <code>@&lt;router&gt;.removed_chat_participant()</code>.</p> Source <p>trueconf.com/docs/chatbot-connector/en/chats/#removedChatParticipant</p> <p>Attributes:</p> Name Type Description <code>timestamp</code> <code>int</code> <p>Unix timestamp (milliseconds) of when the event occurred.</p> <code>chat_id</code> <code>str</code> <p>Unique identifier of the chat where the participant was removed.</p> <code>user_id</code> <code>str</code> <p>TrueConf ID of the participant who was removed.</p> <code>removed_by</code> <code>EnvelopeAuthor</code> <p>Information about the user who removed the participant.</p> <p>Examples:</p> <pre><code>from trueconf.types import RemovedChatParticipant\n\n@&lt;router&gt;.removed_chat_participant()\nasync def on_removed(event: RemovedChatParticipant):\n    print(event.user_id)\n</code></pre>"},{"location":"reference/Types/#trueconf.types.RemovedChatParticipant.chat_id","title":"chat_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>chat_id = field(metadata={'alias': 'chatId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.RemovedChatParticipant.removed_by","title":"removed_by  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>removed_by = field(metadata={'alias': 'removedBy'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.RemovedChatParticipant.timestamp","title":"timestamp  <code>instance-attribute</code>","text":"<pre><code>timestamp\n</code></pre>"},{"location":"reference/Types/#trueconf.types.RemovedChatParticipant.user_id","title":"user_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>user_id = field(metadata={'alias': 'userId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.RemovedMessage","title":"trueconf.types.RemovedMessage  <code>dataclass</code>","text":"<pre><code>RemovedMessage(chat_id, message_id, removed_by)\n</code></pre> <p>               Bases: <code>BoundToBot</code>, <code>DataClassDictMixin</code></p> <p>Event type: a message was removed.</p> <p>This object is received in the handler when a message is deleted from a chat.</p> Notes <p>This class is used as the event type in handler functions decorated with <code>@&lt;router&gt;.removed_message()</code>.</p> Source <p>trueconf.com/docs/chatbot-connector/en/messages/#removedMessage</p> <p>Attributes:</p> Name Type Description <code>chat_id</code> <code>str</code> <p>Unique identifier of the chat from which the message was removed.</p> <code>message_id</code> <code>str</code> <p>Unique identifier of the removed message.</p> <code>removed_by</code> <code>EnvelopeAuthor</code> <p>Information about the user who removed the message.</p> <p>Examples:</p> <pre><code>from trueconf.types import RemovedMessage\n\n@&lt;router&gt;.removed_message()\nasync def on_removed(event: RemovedMessage):\n    print(f\"Message {event.message_id} removed from chat {event.chat_id}\")\n</code></pre>"},{"location":"reference/Types/#trueconf.types.RemovedMessage.chat_id","title":"chat_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>chat_id = field(metadata={'alias': 'chatId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.RemovedMessage.message_id","title":"message_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>message_id = field(metadata={'alias': 'messageId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.RemovedMessage.removed_by","title":"removed_by  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>removed_by = field(metadata={'alias': 'removedBy'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Update","title":"trueconf.types.Update  <code>dataclass</code>","text":"<pre><code>Update(method, type, id, payload)\n</code></pre> <p>               Bases: <code>BoundToBot</code>, <code>DataClassDictMixin</code></p>"},{"location":"reference/Types/#trueconf.types.Update.id","title":"id  <code>instance-attribute</code>","text":"<pre><code>id\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Update.method","title":"method  <code>instance-attribute</code>","text":"<pre><code>method\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Update.payload","title":"payload  <code>instance-attribute</code>","text":"<pre><code>payload\n</code></pre>"},{"location":"reference/Types/#trueconf.types.Update.type","title":"type  <code>instance-attribute</code>","text":"<pre><code>type\n</code></pre>"},{"location":"reference/Types/#trueconf.types.UploadingProgress","title":"trueconf.types.UploadingProgress  <code>dataclass</code>","text":"<pre><code>UploadingProgress(file_id, progress)\n</code></pre> <p>               Bases: <code>BoundToBot</code>, <code>DataClassDictMixin</code></p> <p>Event type: file upload progress.</p> <p>This object is received in the handler when a file is being uploaded and the upload progress is updated.</p> Notes <p>This class is used as the event type in handler functions decorated with <code>@&lt;router&gt;.uploading_progress()</code>.</p> Source <p>trueconf.com/docs/chatbot-connector/en/files/#uploadingProgress</p> <p>Attributes:</p> Name Type Description <code>file_id</code> <code>str</code> <p>Unique identifier of the file being uploaded.</p> <code>progress</code> <code>int</code> <p>Number of bytes uploaded to the server.</p> <p>Examples:</p> <pre><code>from trueconf.types import UploadingProgress\n\n@&lt;router&gt;.uploading_progress()\nasync def on_progress(event: UploadingProgress):\n    print(f\"File {event.file_id}: uploaded {event.progress} bytes\")\n</code></pre>"},{"location":"reference/Types/#trueconf.types.UploadingProgress.file_id","title":"file_id  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>file_id = field(metadata={'alias': 'fileId'})\n</code></pre>"},{"location":"reference/Types/#trueconf.types.UploadingProgress.progress","title":"progress  <code>instance-attribute</code>","text":"<pre><code>progress\n</code></pre>"},{"location":"ru/","title":"Python-\u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 TrueConf Chatbot Connector","text":"<p>python-trueconf-bot \u2014 \u044d\u0442\u043e \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0430\u044f Python-\u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0434\u043b\u044f API \u0447\u0430\u0442-\u0431\u043e\u0442\u043e\u0432 TrueConf Server, \u0432\u0434\u043e\u0445\u043d\u043e\u0432\u043b\u0451\u043d\u043d\u0430\u044f \u0444\u0438\u043b\u043e\u0441\u043e\u0444\u0438\u0435\u0439 aiogram. \u0415\u0441\u043b\u0438 \u0432\u044b \u043a\u043e\u0433\u0434\u0430-\u0442\u043e \u043f\u0438\u0441\u0430\u043b\u0438 \u0431\u043e\u0442\u0430 \u0434\u043b\u044f Telegram \u043d\u0430 aiogram \u2014 \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043d\u0430 TrueConf \u0431\u0443\u0434\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0441\u0442\u044b\u043c \u0438 \u0431\u0435\u0437\u0431\u043e\u043b\u0435\u0437\u043d\u0435\u043d\u043d\u044b\u043c.</p>"},{"location":"ru/#_1","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430","text":""},{"location":"ru/#_2","title":"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f","text":"<ul> <li>Python 3.10+</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u041e\u0421: Linux, macOS, Windows</li> <li>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c virtualenv \u0438\u043b\u0438 poetry \u0434\u043b\u044f \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439</li> </ul>"},{"location":"ru/#pip","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0447\u0435\u0440\u0435\u0437 pip","text":"<pre><code>pip install python-trueconf-bot\n</code></pre>"},{"location":"ru/#aiogram","title":"\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u0441 aiogram","text":"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c aiogram (Telegram) python-trueconf-bot (TrueConf) \u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0441\u0442\u044c asyncio asyncio \u0414\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u044b \u0434\u043b\u044f \u0440\u043e\u0443\u0442\u0438\u043d\u0433\u0430 <code>@router.message(...)</code> <code>@router.message(...)</code> \u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 <code>F.text</code>, <code>F.photo</code>, <code>F.document</code> <code>F.text</code>, <code>F.photo</code>, <code>F.document</code> Magic-filter \u2705 \u2705 \u0410\u043b\u0438\u0430\u0441\u044b (\u0448\u043e\u0440\u0442\u043a\u0430\u0442\u044b) <code>message.answer()</code>, <code>message.reply()</code> <code>message.answer()</code>, <code>message.reply()</code> \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0431\u043e\u0442\u0430 <code>Bot(token=\"...\")</code> <code>Bot(server,token=\"...\")</code> \u0438\u043b\u0438 <code>Bot.from_credentials(server, login, password)</code> JSON \u2192 Python Pydantic models Mashumaro dataclasses \u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442 HTTPS + long polling / webhook \u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0439 WebSocket \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0444\u0430\u0439\u043b\u0430\u043c\u0438 <code>bot.get_file(...)</code> + <code>bot.download_file(...)</code> <code>message.photo.download()</code>, <code>message.document.download()</code>, <code>bot.download_file_by_id(...)</code> <ul> <li>\u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u043e\u043f\u044b\u0442 \u0441 aiogram \u2014 \u043a\u043e\u0434 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0438\u0442\u0441\u044f \u043f\u043e\u0447\u0442\u0438 \u0431\u0435\u0437 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439.</li> <li>TrueConf API \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u00ab\u0447\u0435\u043b\u043e\u0432\u0435\u0447\u0435\u0441\u043a\u0438\u043c\u00bb: \u0432\u043c\u0435\u0441\u0442\u043e JSON-\u0441\u043b\u043e\u0432\u0430\u0440\u0435\u0439 \u0432\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\u0435 \u0441 Python-\u043a\u043b\u0430\u0441\u0441\u0430\u043c\u0438.</li> <li>\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0435 \u0443\u0434\u043e\u0431\u043d\u044b\u0439 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u0434\u043b\u044f \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438 \u0431\u043e\u0442\u043e\u0432 \u0432 \u043a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u0447\u0430\u0442\u044b TrueConf.</li> </ul>"},{"location":"ru/features/","title":"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438","text":""},{"location":"ru/features/#asyncio","title":"\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0441\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 asyncio","text":"<p>\u0412\u0441\u0451 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u043e \u043d\u0430 async/await. \u0412\u044b\u0441\u043e\u043a\u0430\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043e\u043a. </p>"},{"location":"ru/features/#aiogram","title":"\u041f\u043e\u0445\u043e\u0436\u0435\u0441\u0442\u044c \u043d\u0430 aiogram","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0437\u043d\u0430\u043a\u043e\u043c\u044b\u0435 \u043a\u043e\u043d\u0446\u0435\u043f\u0446\u0438\u0438: Router, \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u044b, \u0448\u043e\u0440\u0442\u043a\u0430\u0442\u044b (message.answer, message.reply), \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u0438 \u0434\u0430\u0436\u0435 magic-filter (F.text, F.document, F.photo). </p>"},{"location":"ru/features/#_2","title":"\u0423\u0434\u043e\u0431\u043d\u0430\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0441\u043e\u0431\u044b\u0442\u0438\u0439","text":"<p>\u0412\u0441\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 JSON \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0442\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0432 \u043a\u043b\u0430\u0441\u0441\u044b Python (Message, AttachmentContent, UploadingProgress \u0438 \u0434\u0440.), \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0440\u0430\u0431\u043e\u0442\u0430 \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043f\u0440\u043e\u0441\u0442\u0430 \u0438 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0430. </p>"},{"location":"ru/features/#_3","title":"\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u044b \u0434\u043b\u044f \u0440\u043e\u0443\u0442\u0438\u043d\u0433\u0430","text":"<p>\u0420\u043e\u0443\u0442\u0435\u0440 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u044d\u043b\u0435\u0433\u0430\u043d\u0442\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u044f:</p> <pre><code>from trueconf import Router, Message\nfrom trueconf.enums import MessageType\nfrom trueconf.filters import F\n\nrouter = Router()\n\n@router.message(F.text.startswith(\"/start\"))\nasync def on_start(msg: Message):\n  await msg.answer(\"\u041f\u0440\u0438\u0432\u0435\u0442! \u042f TrueConf \u0431\u043e\u0442 \ud83d\udc4b\")\n\n@router.message(F.document.mime_type == \"application/pdf\")\nasync def on_pdf(msg: Message):\n  await msg.reply(\"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 PDF!\")\n</code></pre>"},{"location":"ru/features/#_4","title":"\u0414\u0432\u0430 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f","text":"<ol> <li> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0437\u0430\u0440\u0430\u043d\u0435\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 JWT-\u0442\u043e\u043a\u0435\u043d:     <pre><code>bot = Bot(server=\"video.example.com\", token=\"...\")\n</code></pre></p> </li> <li> <p>\u0438\u043b\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044e \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043b\u043e\u0433\u0438\u043d\u0430 \u0438 \u043f\u0430\u0440\u043e\u043b\u044f:     <pre><code>bot = Bot.from_credentials(server, username, password)\n</code></pre></p> </li> </ol>"},{"location":"ru/features/#aiogram_1","title":"\u0410\u043b\u0438\u0430\u0441\u044b \u0438 \u0448\u043e\u0440\u0442\u043a\u0430\u0442\u044b \u0432 \u0441\u0442\u0438\u043b\u0435 aiogram","text":"<p>\u0414\u043b\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043f\u0440\u0438\u0432\u044b\u0447\u043d\u044b\u0435 \u043c\u0435\u0442\u043e\u0434\u044b:</p> <pre><code>await msg.answer(\"\u0422\u0435\u043a\u0441\u0442 \u0432 \u0447\u0430\u0442\")\nawait msg.reply(\"\u041e\u0442\u0432\u0435\u0442 \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435\")\nawait msg.copy_to(chat_id=\"other_chat\")\n</code></pre>"},{"location":"ru/features/#_5","title":"\u041c\u043d\u043e\u0433\u043e\u0431\u043e\u0442\u043d\u043e\u0441\u0442\u044c","text":"<p>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0431\u043e\u0442\u043e\u0432 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e.</p>"},{"location":"ru/features/#websocket","title":"\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442 \u2014 WebSocket","text":"<p>\u0412\u0441\u0451 \u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0447\u0435\u0440\u0435\u0437 WebSocket. \u042d\u0442\u043e \u0431\u044b\u0441\u0442\u0440\u0435\u0435 \u0438 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u0435\u0435 \u043a\u043b\u0430\u0441\u0441\u0438\u0447\u0435\u0441\u043a\u0438\u0445 REST-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.</p>"},{"location":"ru/features/#magic-filter-aiogram","title":"Magic-filter, \u043a\u0430\u043a \u0432 aiogram","text":"<p>\u0422\u043e\u0447\u043d\u043e \u0442\u0430\u043a \u0436\u0435, \u043a\u0430\u043a \u0432 aiogram:</p> <pre><code>@router.message(F.photo)\nasync def on_photo(msg: Message): ...\n\n@router.message(F.document.mime_type.in_([\"application/pdf\", \"application/msword\"]))\nasync def on_doc(msg: Message): ...\n</code></pre>"},{"location":"ru/features/#_6","title":"\u0424\u0430\u0439\u043b\u044b \u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438","text":"<p>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0430\u043d\u0430 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0430\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0438 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432. \u041c\u043e\u0436\u043d\u043e \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u0442\u044c \u0444\u0430\u0439\u043b \u0432\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 \u0438\u043b\u0438 \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u0443\u0442\u0438.</p> <pre><code>path = await bot.download_file_by_id(file_id)\nawait msg.answer(f\"\u0424\u0430\u0439\u043b \u0441\u043a\u0430\u0447\u0430\u043d \u0432 {path}\")\n</code></pre>"},{"location":"ru/features/#api","title":"\u0412\u0441\u0435 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0435 \u043c\u0435\u0442\u043e\u0434\u044b API","text":"<p>\u0412 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0435 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0432\u0441\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043c\u0435\u0442\u043e\u0434\u044b TrueConf API: \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439, \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430/\u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432, \u043e\u043f\u0440\u043e\u0441\u044b, \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438, \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430\u043c\u0438 \u0438 \u043f\u0440.</p>"},{"location":"ru/release_notes/","title":"\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439","text":""},{"location":"ru/release_notes/#110","title":"1.1.0","text":"<p>\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e:</p> <ul> <li>\u041d\u043e\u0432\u044b\u0435 \u043a\u043b\u0430\u0441\u0441\u044b \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0444\u0430\u0439\u043b\u0430\u043c\u0438: <code>FSInputFile</code>, <code>BufferedInputFile</code>, <code>URLInputFile</code>. \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u2014 \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438.</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0438\u0441\u0442\u043e\u0440\u0438\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 <code>display_history = True</code> \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0433\u0440\u0443\u043f\u043f\u043e\u0432\u043e\u0439 \u0447\u0430\u0442 \u0438\u043b\u0438 \u043a\u0430\u043d\u0430\u043b.</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0434\u043b\u044f:<ul> <li>\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0440\u043e\u043b\u0438 \u0432 \u0433\u0440\u0443\u043f\u043f\u043e\u0432\u043e\u043c \u0447\u0430\u0442\u0435 \u0438\u043b\u0438 \u043a\u0430\u043d\u0430\u043b\u0435 (\u0437\u0430\u043f\u0440\u043e\u0441, \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435);</li> <li>\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0447\u0430\u0442\u0430 \u201c\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435\u201d (\u0437\u0430\u043f\u0440\u043e\u0441, \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435).</li> </ul> </li> <li>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0444\u0430\u0439\u043b\u043e\u0432 \u0441 \u043f\u043e\u0434\u043f\u0438\u0441\u044c\u044e (<code>caption</code>).</li> <li>\u0428\u043e\u0440\u0442\u043a\u0430\u0442 <code>.save_to_favorites()</code> \u0434\u043b\u044f \u0431\u044b\u0441\u0442\u0440\u043e\u0433\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 \u0447\u0430\u0442 \"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435\".</li> <li>\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e <code>await bot.me</code>, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0435\u0435 <code>chat_id</code> \u0447\u0430\u0442\u0430 \"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435\".</li> </ul> <p>\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e:</p> <ul> <li>\u0421\u0442\u0438\u043a\u0435\u0440\u044b, \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0447\u0435\u0440\u0435\u0437 <code>bot.send_sticker()</code>, \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u043b\u0438\u0441\u044c \u0441 \u0444\u043e\u043d\u043e\u043c \u0438\u0437-\u0437\u0430 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0433\u043e MIME-\u0442\u0438\u043f\u0430.</li> <li>\u041c\u0435\u0442\u043e\u0434 <code>.remove_participant_from_chat()</code> \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u043b \u043f\u0440\u0438 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0438 \u043d\u0435\u043f\u043e\u043b\u043d\u043e\u0433\u043e TrueConf ID.</li> <li>\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u043a\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u0438\u0437-\u0437\u0430 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0433\u043e \u0430\u043b\u0438\u0430\u0441\u0430.</li> <li>\u0418\u043d\u043e\u0433\u0434\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0442\u043e\u043a\u0435\u043d\u0430 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e <code>.from_credentials()</code> \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 <code>400 Bad Requests</code> \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0446\u0438\u0444\u0440\u043e\u0432\u043e\u0433\u043e (digit) \u043f\u0430\u0440\u043e\u043b\u044f.</li> </ul> <p>\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u043e:</p> <ul> <li>\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e <code>bot.server_name</code> \u0441\u0442\u0430\u043b\u043e \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u043c. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0435\u0433\u043e \u043a\u0430\u043a <code>await bot.server_name</code>.</li> </ul>"},{"location":"ru/release_notes/#100","title":"1.0.0","text":"<p>\ud83c\udf89 \u041f\u0435\u0440\u0432\u044b\u0439 \u0440\u0435\u043b\u0438\u0437!</p> <ul> <li>\u0421\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 python-trueconf-bot.</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0432\u0441\u0435\u0445 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u043c\u0435\u0442\u043e\u0434\u043e\u0432 API TrueConf ChatBot.</li> <li>\u041f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c\u044b \u0438 \u0441\u043e\u0447\u0435\u0442\u0430\u043d\u0438\u044f \u043a\u043b\u0430\u0432\u0438\u0448 \u0432 \u0441\u0442\u0438\u043b\u0435 aiogram (message.answer, message.reply \u0438 \u0442. \u0434.).</li> <li>\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 WebSocket.</li> <li>\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0444\u0430\u0439\u043b\u0430\u043c\u0438 (\u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430).</li> <li>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f: trueconf.github.io/python-trueconf-bot/</li> <li>PyPI: pypi.org/project/python-trueconf-bot/</li> </ul>"},{"location":"ru/examples/echo_bot/","title":"\u042d\u0445\u043e-\u0431\u043e\u0442","text":"<pre><code>import asyncio\nfrom trueconf import Bot, Dispatcher, Router, Message, F, ParseMode\nfrom os import getenv\n\nrouter = Router()\ndp = Dispatcher()\ndp.include_router(router)\n\nTOKEN = getenv(\"TOKEN\")\n\nbot = Bot(server=\"video.example.com\", token=TOKEN, dispatcher=dp)\n\n\n@router.message(F.text)\nasync def echo(msg: Message):\n    await msg.answer(f\"You says: **{msg.text}**\", parse_mode=ParseMode.MARKDOWN)\n\n\nasync def main():\n    await bot.run()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre>"},{"location":"ru/examples/multibot/","title":"\u041c\u0443\u043b\u044c\u0442\u0438\u0431\u043e\u0442","text":"<p>\u041a\u043e\u043c\u0430\u043d\u0434\u0430 TrueConf \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u043b\u0430 \u043f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u0440\u0430\u0437\u0443 4 \u0431\u043e\u0442\u043e\u0432 (all-in-one):</p> <ul> <li>\u044d\u0445\u043e-\u0431\u043e\u0442;</li> <li>\u0431\u043e\u043b\u044c\u043d\u0438\u0447\u043d\u044b\u0439-\u0431\u043e\u0442, \u043a\u043e\u0440\u044b\u0439 \u043f\u0435\u0440\u0435\u0441\u044b\u043b\u0430\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 \u0433\u0440\u0443\u043f\u043f\u0443 \u0441 HR; </li> <li>\u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433-\u0431\u043e\u0442 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438 \u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e \u0441\u0435\u0440\u0432\u0438\u0441\u0430 (TrueConf Server);</li> <li>gpt-\u0431\u043e\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432 \u0444\u043e\u043d\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0443\u044e LLM-\u043c\u043e\u0434\u0435\u043b\u044c.</li> </ul> <p>\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439 </p>"},{"location":"ru/learn/enums/","title":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0447\u0435\u0441\u043b\u0435\u043d\u0438\u0439","text":"<p>\u0412 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0435 python-trueconf-bot \u043c\u043d\u043e\u0433\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043c\u0435\u0442\u043e\u0434\u043e\u0432 \u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u044b \u0447\u0435\u0440\u0435\u0437 enums (\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f). \u042d\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u0438 \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u043e\u0448\u0438\u0431\u043e\u043a \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435 \u00ab\u043c\u0430\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0441\u0442\u0440\u043e\u043a\u00bb \u0438\u043b\u0438 \u0447\u0438\u0441\u043b\u043e\u0432\u044b\u0445 \u043a\u043e\u0434\u043e\u0432.</p> <p>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0440\u0430\u0437\u0443 \u0432\u0441\u0451:</p> <pre><code>from trueconf.enums import *\n</code></pre> <p>\u0418\u043b\u0438 \u0442\u043e\u0447\u0435\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0443\u0436\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f:</p> <pre><code>from trueconf.enums import ParseMode, FileReadyState\n</code></pre> <p>\u0414\u043b\u044f \u0447\u0435\u0433\u043e \u043d\u0443\u0436\u043d\u044b enums?</p> <ul> <li>\u043f\u043e\u0432\u044b\u0448\u0430\u044e\u0442 \u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0441\u0442\u044c \u043a\u043e\u0434\u0430;</li> <li>\u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0442 \u043e\u043f\u0435\u0447\u0430\u0442\u043a\u0438 \u0432 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u0445;</li> <li>\u0434\u0430\u044e\u0442 \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0438 \u0432 IDE (\u0430\u0432\u0442\u043e\u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435);</li> <li>\u044f\u0432\u043d\u043e \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442, \u043a\u0430\u043a\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b.</li> </ul> <p>Tip</p> <p>\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f\u043c\u0438 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f \u0441 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435.</p>"},{"location":"ru/learn/enums/#_2","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"ru/learn/enums/#_3","title":"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0435\u043a\u0441\u0442\u0430","text":"<pre><code>from trueconf.enums import ParseMode\n\n@r.message()\nasync def on_message(message: Message):\n    await message.answer(\n        \"Hello, *world*!\",\n        parse_mode=ParseMode.MARKDOWN\n)\n</code></pre> <p>\u0412\u043c\u0435\u0441\u0442\u043e \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u043f\u0438\u0441\u0430\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 <code>\"Markdown\"</code>, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f <code>ParseMode.MARKDOWN</code>.</p>"},{"location":"ru/learn/enums/#_4","title":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0444\u0430\u0439\u043b\u0430\u043c\u0438","text":"<pre><code>from trueconf.enums import FileReadyState\n\ninfo = await bot.get_file_info(file_id=\"abc123\")\n\nif info.ready_state == FileReadyState.READY:\n    await bot.download_file_by_id(info.file_id, \"./downloads\")\nelif info.ready_state == FileReadyState.NOT_AVAILABLE:\n    print(\"File is not available\")\n</code></pre>"},{"location":"ru/learn/enums/#_5","title":"\u0422\u0438\u043f\u044b \u0447\u0430\u0442\u043e\u0432","text":"<pre><code>from trueconf.enums import ChatType\n\nif chat_type == ChatType.GROUP:\n    await bot.send_message(\"This is a group chat\")\n</code></pre> <p>\u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, enums \u043f\u043e\u043c\u043e\u0433\u0430\u044e\u0442 \u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u0434 \u0447\u0438\u0449\u0435 \u0438 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0435\u0435.</p>"},{"location":"ru/learn/files/","title":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0444\u0430\u0439\u043b\u0430\u043c\u0438","text":"<p>TrueConf Chatbot Connector \u043d\u0435 \u043d\u0430\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u043d\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u0444\u0430\u0439\u043b\u043e\u0432 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440. \u041e\u0434\u043d\u0430\u043a\u043e, \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 \u0432\u0435\u0440\u0441\u0438\u0438 TrueConf Server 5.5.2 \u0438 \u0432\u044b\u0448\u0435, \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u043d\u0430 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u0438 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0444\u043e\u0440\u043c\u0430\u0442\u044b (\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f).</p> <p>\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 python-trueconf-bot \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0443\u0434\u043e\u0431\u043d\u044b\u0435 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0444\u0430\u0439\u043b\u0430\u043c\u0438: \u043a\u0430\u043a \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438, \u0442\u0430\u043a \u0438 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438. \u0427\u0442\u043e\u0431\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0444\u0430\u0439\u043b, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043e\u0434\u0438\u043d \u0438\u0437 \u043f\u043e\u0434\u043a\u043b\u0430\u0441\u0441\u043e\u0432 InputFile, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445.</p> <p>\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0442\u0440\u0438 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0445 \u043a\u043b\u0430\u0441\u0441\u0430 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0444\u0430\u0439\u043b\u043e\u0432:</p> <ul> <li>FSInputFile \u2014 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u0430 \u0441 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0439 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b</li> <li>BufferedInputFile \u2014 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0438\u0437 \u0431\u0430\u0439\u0442\u043e\u0432\u043e\u0433\u043e \u0431\u0443\u0444\u0435\u0440\u0430</li> <li>URLInputFile \u2014 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u0430 \u0441 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u043e\u0433\u043e URL</li> </ul> <p>\u0412\u0441\u0435 \u043a\u043b\u0430\u0441\u0441\u044b \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u044b \u0432 \u043c\u043e\u0434\u0443\u043b\u0435 trueconf.types.</p> <p>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u044d\u0442\u0438 \u043a\u043b\u0430\u0441\u0441\u044b \u0432 \u043c\u0435\u0442\u043e\u0434\u0430\u0445:</p> <ul> <li>bot.send_document(...)</li> <li>bot.send_photo(...)</li> <li>bot.send_sticker(...)</li> </ul>"},{"location":"ru/learn/files/#_2","title":"\u041a\u0430\u043a \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0444\u0430\u0439\u043b?","text":""},{"location":"ru/learn/files/#fsinputfile","title":"\ud83d\uddc2\ufe0f FSInputFile","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u043e\u0432 \u0441 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0439 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c, \u043a\u043e\u0433\u0434\u0430 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u043f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0443.</p> <pre><code>from trueconf.types import FSInputFile\n\nawait bot.send_document(\n    chat_id=\"a1b2c3d4\",\n    file=FSInputFile(\"docs/report.pdf\"),\n    caption=\"\ud83d\udcc4 Annual report for **2025**\",\n    parse_mode=ParseMode.MARKDOWN\n)\n\nawait bot.send_sticker(\n    chat_id=\"a1b2c3d4\",\n    file=FSInputFile(\"stickers/cat.webp\")\n)\n</code></pre>"},{"location":"ru/learn/files/#bufferedinputfile","title":"\ud83e\udde0 BufferedInputFile","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f, \u043a\u043e\u0433\u0434\u0430 \u0444\u0430\u0439\u043b \u0443\u0436\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u043f\u0430\u043c\u044f\u0442\u0438 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0438\u0437 API, \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0432 \u043f\u0430\u043c\u044f\u0442\u044c (\u041e\u0417\u0423) \u0438\u043b\u0438 \u0438\u0437 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445).</p> <pre><code>from trueconf.types import BufferedInputFile\n\nimage_bytes = open(\"image.jpg\", \"rb\").read()\npreview_bytes = open(\"preview.jpg\", \"rb\").read()\n\nawait bot.send_photo(\n    chat_id=\"a1b2c3d4\",\n    file=BufferedInputFile(\n        file=image_bytes,\n        filename=\"image.jpg\"\n    ),\n    preview=BufferedInputFile(\n        file=preview_bytes,\n        filename=\"preview.jpg\"\n    ),\n    caption=\"This is my photo\"\n)\n</code></pre> <p>\u0422\u0430\u043a\u0436\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0443\u0434\u043e\u0431\u043d\u044b\u0439 \u043c\u0435\u0442\u043e\u0434 <code>from_file()</code>:</p> <pre><code>file = BufferedInputFile.from_file(\"archive.zip\")\nawait bot.send_document(chat_id=\"...\", file=file)\n</code></pre>"},{"location":"ru/learn/files/#urlinputfile","title":"\ud83c\udf10 URLInputFile","text":"<p>\u0415\u0441\u043b\u0438 \u0444\u0430\u0439\u043b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0435, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u0438 \u0431\u043e\u0442 \u0441\u043a\u0430\u0447\u0430\u0435\u0442 \u0435\u0433\u043e \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e.</p> <pre><code>from trueconf.types import URLInputFile\n\nfile = URLInputFile(\n    url=\"https://example.com/image.png\",\n    filename=\"image.png\",  # \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u2014 \u0431\u0443\u0434\u0435\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\n)\n</code></pre>"},{"location":"ru/learn/files/#_3","title":"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438","text":"<ul> <li>MIME-\u0442\u0438\u043f: \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438. \u0415\u0441\u043b\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043f\u0430\u043a\u0435\u0442 python-magic, MIME-\u0442\u0438\u043f \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d \u043f\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u043c\u0443 \u0444\u0430\u0439\u043b\u0430 (\u0431\u0430\u0439\u0442\u0430\u043c), \u0447\u0442\u043e \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0442\u043e\u0447\u043d\u0435\u0435, \u0447\u0435\u043c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043f\u043e \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044e. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0435\u0433\u043e \u0441 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044f\u043c\u0438 \u0442\u0430\u043a:</li> </ul> <pre><code>pip install python-trueconf-bot[python-magic]\n</code></pre> <ul> <li>clone(): \u043a\u0430\u0436\u0434\u044b\u0439 \u0442\u0438\u043f \u0444\u0430\u0439\u043b\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043c\u0435\u0442\u043e\u0434 <code>.clone()</code> \u2014 \u043e\u043d \u0441\u043e\u0437\u0434\u0430\u0451\u0442 \u043d\u043e\u0432\u0443\u044e \u043a\u043e\u043f\u0438\u044e \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0441 \u0434\u0440\u0443\u0433\u0438\u043c <code>id(object)</code>.</li> </ul>"},{"location":"ru/learn/files/#_4","title":"\u041a\u0430\u043a \u0441\u043a\u0430\u0447\u0430\u0442\u044c \u0444\u0430\u0439\u043b?","text":"<p>\u0414\u043b\u044f \u0443\u0434\u043e\u0431\u043d\u043e\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f (<code>message.photo</code>) \u0438\u043b\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b (<code>message.document</code>),  \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0448\u043e\u0440\u0442\u043a\u0430\u0442-\u043c\u0435\u0442\u043e\u0434 <code>.download()</code>.  \u042d\u0442\u043e \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u0430\u0445\u0430\u0440 \u043d\u0430\u0434 \u043c\u0435\u0442\u043e\u0434\u043e\u043c <code>bot.download_file_by_id(...)</code>, \u0443\u043f\u0440\u043e\u0449\u0430\u044e\u0449\u0438\u0439 \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u044f\u043c\u0438.</p> <p>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0438\u043c\u0435\u043d\u043d\u043e <code>.download()</code>, \u0442\u0430\u043a \u043a\u0430\u043a \u043e\u043d:</p> <ul> <li>\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 file_id \u0438\u0437 \u043e\u0431\u044a\u0435\u043a\u0442\u0430;</li> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0431\u043e\u0442\u0430;</li> <li>\u043c\u0438\u043d\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u0434\u0430.</li> </ul> <pre><code>@router.message(F.document)\nasync def handle_doc(msg: Message):\n    await msg.document.download(dest_path=\"document.pdf\")\n</code></pre> <p>Notes</p> <p>\u041f\u0443\u0442\u044c <code>dest_path</code> \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043a\u0430\u043a \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c, \u0442\u0430\u043a \u0438 \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u044b\u043c.</p> <p>\u0422\u0430\u043a\u0436\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043c\u0435\u0442\u043e\u0434 <code>download_file_by_id(...)</code>, \u0435\u0441\u043b\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0431\u043e\u043b\u0435\u0435 \u0433\u0438\u0431\u043a\u0438\u0439 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c:</p> <pre><code>await bot.download_file_by_id(\n    file_id=msg.document.file_id, \n    dest_path=\"document.pdf\"\n)\n</code></pre>"},{"location":"ru/learn/filters/","title":"\u0424\u0438\u043b\u044c\u0442\u0440\u044b","text":"<p>\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u0434\u043b\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 (\u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432) \u043a \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c. \u041f\u043e\u0438\u0441\u043a \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u0432\u0441\u0435\u0433\u0434\u0430 \u043e\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u043f\u0435\u0440\u0432\u043e\u043c \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0438 \u0441 \u043d\u0430\u0431\u043e\u0440\u043e\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432.  \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u0441\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u0438\u043c\u0435\u044e\u0442 \u043f\u0443\u0441\u0442\u043e\u0439 \u043d\u0430\u0431\u043e\u0440 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u0441\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u044b \u043f\u0435\u0440\u0432\u043e\u043c\u0443 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0443 \u0441 \u043f\u0443\u0441\u0442\u044b\u043c \u043d\u0430\u0431\u043e\u0440\u043e\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432. \u0412 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0434\u0432\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u043f\u043e\u0434\u0445\u043e\u0434\u0430 \u0434\u043b\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439:</p> <ul> <li>Command \u2014 \u0444\u0438\u043b\u044c\u0442\u0440 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043a\u043e\u043c\u0430\u043d\u0434 \u0432\u0438\u0434\u0430 /\u043a\u043e\u043c\u0430\u043d\u0434\u0430 [\u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b].</li> <li>MagicFilter \u2014 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0435\u043a\u043b\u0430\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440 (\u0438\u0437 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 magic-filter) \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043f\u043e\u043b\u0435\u0439 \u0441\u043e\u0431\u044b\u0442\u0438\u044f.</li> </ul> <p>\u042d\u0442\u0438 \u0434\u0432\u0430 \u043f\u043e\u0434\u0445\u043e\u0434\u0430 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0432\u043c\u0435\u0441\u0442\u0435: Command \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0444\u043e\u0440\u043c\u0443 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0438 \u0432\u044b\u0434\u0435\u043b\u044f\u0435\u0442 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b, \u0430 MagicFilter \u2014 \u043d\u0430\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0435\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043d\u0430 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b \u0438\u043b\u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u043f\u043e\u043b\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.</p> <p>Tip</p> <p>\u041d\u0438\u0436\u0435 \u0432\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u0439\u0442\u0438 \u043f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432, \u043d\u043e \u0435\u0441\u043b\u0438 \u044d\u0442\u043e\u0433\u043e \u043e\u043a\u0430\u0436\u0435\u0442\u0441\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e, \u0442\u043e \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u044b \u0432 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438.</p>"},{"location":"ru/learn/filters/#command","title":"Command","text":"<p>Command \u2014 \u0443\u0434\u043e\u0431\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440 \u0434\u043b\u044f \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043a\u043e\u043c\u0430\u043d\u0434 \u0432 \u0442\u0435\u043a\u0441\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.</p> <pre><code>Command(*commands: str | Pattern[str],\n        prefix: str = \"/\",\n        ignore_case: bool = False,\n        magic: MagicFilter | None = None)\n</code></pre> <p>\u0427\u0442\u043e \u0443\u043c\u0435\u0435\u0442?</p> <ul> <li>\u041f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u043e\u0434\u043d\u0443 \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u043c\u0430\u043d\u0434: <code>Command(\"start\")</code>, <code>Command(\"info\", \"about\")</code>.</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u044b: <code>Command(re.compile(r\"echo_\\d+\"))</code>.</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u044b (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e <code>/</code>), \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 <code>prefix=\"!/\"</code> \u2014 \u0442\u043e\u0433\u0434\u0430 \u0431\u0443\u0434\u0443\u0442 \u0432\u0430\u043b\u0438\u0434\u043d\u044b <code>!cmd</code> \u0438 <code>/cmd</code>.</li> <li>\u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u0435\u0433\u0438\u0441\u0442\u0440 \u0434\u043b\u044f \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434 (<code>ignore_case=True</code>).</li> <li>\u041f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 <code>magic</code> \u2014 MagicFilter, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u043b\u0438\u0434\u0438\u0440\u0443\u0435\u0442 <code>CommandObject</code> (\u0441\u043c. \u043d\u0438\u0436\u0435).</li> </ul> <p>\u0424\u0438\u043b\u044c\u0442\u0440 Command \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c:</p> <ol> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u0447\u0442\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u2014 \u044d\u0442\u043e <code>Message</code>, \u0438 \u0447\u0442\u043e \u043e\u043d\u043e \u0438\u043c\u0435\u0435\u0442 \u0442\u0438\u043f <code>PLAIN_MESSAGE</code>.</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u043b\u0438 \u0442\u0435\u043a\u0441\u0442 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e <code>/</code>).</li> <li>\u0414\u0435\u043b\u0438\u0442 \u0441\u0442\u0440\u043e\u043a\u0443 \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0438 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b (\u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c).</li> <li>\u0421\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0435\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0441 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c\u0438 (\u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443 <code>re.Pattern</code>).</li> <li>\u0415\u0441\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d <code>magic</code>, \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f <code>MagicFilter</code> \u043a <code>CommandObject</code>.</li> <li>\u0415\u0441\u043b\u0438 <code>magic</code>-\u0444\u0438\u043b\u044c\u0442\u0440 \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u043b, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u043b\u043e\u0432\u0430\u0440\u044c <code>{\"command\": command_obj}</code>.</li> </ol>"},{"location":"ru/learn/filters/#commandobject","title":"CommandObject","text":"<p>\u0415\u0441\u043b\u0438 \u0444\u0438\u043b\u044c\u0442\u0440 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442, \u0432 \u0445\u0435\u043d\u0434\u043b\u0435\u0440 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043e\u0431\u044a\u0435\u043a\u0442 CommandObject (\u043f\u0435\u0440\u0435\u0434\u0430\u0451\u0442\u0441\u044f \u043a\u0430\u043a \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <code>command</code>):</p> <pre><code>@dataclass(frozen=True)\nclass CommandObject:\n    prefix: str\n    command: str\n    args: str | None\n    regexp_match: Match[str] | None = None\n    magic_result: Any | None = None\n</code></pre> <p>\u041f\u043e\u043b\u044f</p> <ul> <li><code>prefix</code> \u2014 \u0441\u0438\u043c\u0432\u043e\u043b \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 (<code>/</code> \u0438\u043b\u0438 <code>!</code> \u0438 \u0442.\u043f.).</li> <li><code>command</code> \u2014 \u0438\u043c\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0431\u0435\u0437 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430.</li> <li><code>args</code> \u2014 \u0441\u0442\u0440\u043e\u043a\u0430 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432 (\u0432\u0441\u0451, \u0447\u0442\u043e \u043f\u043e\u0441\u043b\u0435 \u043f\u0440\u043e\u0431\u0435\u043b\u0430).</li> <li><code>regexp_match</code> \u2014 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 <code>re.Match</code>, \u0435\u0441\u043b\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0431\u044b\u043b\u0430 \u0437\u0430\u0434\u0430\u043d\u0430 \u043a\u0430\u043a \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043a\u0430.</li> <li><code>magic_result</code> \u2014 \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u0435\u0440\u043d\u0451\u0442 <code>magic</code> (\u0435\u0441\u043b\u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c\u043e).</li> </ul>"},{"location":"ru/learn/filters/#_2","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b","text":"<p>\u041f\u0440\u043e\u0441\u0442\u0435\u0439\u0448\u0438\u0439 \u0445\u0435\u043d\u0434\u043b\u0435\u0440:</p> <pre><code>@r.message(Command(\"ping\"))\nasync def handle_ping(message: Message):\n    await bot.send_message(chat_id=message.chat_id, text=\"pong\")\n</code></pre> <p>\u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u043c\u0430\u043d\u0434:</p> <pre><code>@r.message(Command(\"info\", \"about\", \"whoami\"))\nasync def handle_info(message: Message, command: CommandObject):\n    await bot.send_message(chat_id=message.chat_id, text=f\"Used /{command.command}\")\n</code></pre> <p>\u041a\u043e\u043c\u0430\u043d\u0434\u0430 \u0441 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043e\u043c:</p> <pre><code>@r.message(Command(re.compile(r\"echo_\\d+\")))\nasync def handle_echo_numbered(message: Message, command: CommandObject):\n    await bot.send_message(chat_id=message.chat_id, text=f\"Echo: {command.command} {command.args or ''}\")\n</code></pre>"},{"location":"ru/learn/filters/#magicfilter","title":"MagicFilter","text":"<p>MagicFilter \u2014 \u0434\u0435\u043a\u043b\u0430\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439, \u0446\u0435\u043f\u043e\u0447\u0435\u0447\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440 \u0438\u0437 \u043f\u0430\u043a\u0435\u0442\u0430 magic-filter.  \u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0432\u044b\u0440\u0430\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043d\u0430\u0434 \u043f\u043e\u043b\u044f\u043c\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0432 \u0432\u0438\u0434\u0435 \u0446\u0435\u043f\u043e\u0447\u0435\u043a \u0438 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432. \u0412\u043c\u0435\u0441\u0442\u043e \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u043f\u043e\u043b\u044f \u0430\u043f\u0434\u0435\u0439\u0442\u0430 \u0432\u043d\u0443\u0442\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430, \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0434\u0430\u0442\u044c \u043f\u0440\u044f\u043c\u043e \u0432 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u0435.</p> <p>\u0424\u0438\u043b\u044c\u0442\u0440 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u00ab\u043b\u0435\u043d\u0438\u0432\u043e\u00bb: \u043f\u0440\u0438 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u0441\u0430\u043c\u0430 \u0446\u0435\u043f\u043e\u0447\u043a\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043e\u043a, \u0430 \u043d\u0435 \u0435\u0451 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442.  \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043c\u043e\u043c\u0435\u043d\u0442, \u043a\u043e\u0433\u0434\u0430 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 \u043d\u043e\u0432\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u043b\u0435\u0433\u043a\u043e \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0438 \u043e\u0441\u0442\u0430\u044e\u0442\u0441\u044f \u0447\u0438\u0442\u0430\u0435\u043c\u044b\u043c\u0438.  \u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u0434\u0435\u043b\u0430\u0435\u0442 \u043a\u043e\u0434 \u043a\u043e\u0440\u043e\u0447\u0435 \u0438 \u043f\u043e\u043d\u044f\u0442\u043d\u0435\u0435: \u0441\u0440\u0430\u0437\u0443 \u0432\u0438\u0434\u043d\u043e, \u043a\u0430\u043a\u0438\u0435 \u0438\u043c\u0435\u043d\u043d\u043e \u0430\u043f\u0434\u0435\u0439\u0442\u044b \u043f\u0440\u043e\u0439\u0434\u0443\u0442 \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.</p> <p>\u0418\u0434\u0435\u044f MagicFilter \u043f\u0440\u043e\u0441\u0442\u0430: \u0432\u044b \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442\u0435 \u0446\u0435\u043f\u043e\u0447\u043a\u0443 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0435, \u0430 \u0437\u0430\u0442\u0435\u043c \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0435 \u0435\u0451 \u043a \u043e\u0431\u044a\u0435\u043a\u0442\u0443.  \u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u044c\u0442\u0435, \u0447\u0442\u043e \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u043e\u0431\u044a\u0435\u043a\u0442 \u0441 \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u043c\u0438 \u043f\u043e\u043b\u044f\u043c\u0438. \u0412\u043c\u0435\u0441\u0442\u043e \u0440\u0443\u0447\u043d\u043e\u0439 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0432\u0438\u0434\u0430 <code>if obj.foo.bar.baz == \"spam\": ...</code> \u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 \u0434\u0435\u043a\u043b\u0430\u0440\u0430\u0442\u0438\u0432\u043d\u043e:</p> <pre><code>F.foo.bar.baz == \"spam\"\n</code></pre> <p>\u041f\u043e\u043b\u0443\u0447\u0438\u0432\u0448\u0438\u0439\u0441\u044f \u0444\u0438\u043b\u044c\u0442\u0440 \u2014 \u044d\u0442\u043e \u043d\u0435 \u043c\u0433\u043d\u043e\u0432\u0435\u043d\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430, \u0430 \u043e\u0431\u044a\u0435\u043a\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u00ab\u0437\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u0435\u0442\u00bb \u0443\u0441\u043b\u043e\u0432\u0438\u0435.  \u041f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0430\u043f\u0434\u0435\u0439\u0442\u0430 \u044d\u0442\u043e\u0442 \u0444\u0438\u043b\u044c\u0442\u0440 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a \u043e\u0431\u044a\u0435\u043a\u0442\u0443 (\u0440\u043e\u0443\u0442\u0435\u0440 \u0441\u0430\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u043f\u043e\u0434 \u043a\u0430\u043f\u043e\u0442\u043e\u043c).  \u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043c\u0435\u0442\u043e\u0434 <code>.resolve(obj)</code>,  \u043d\u043e \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c \u0435\u0433\u043e \u0432 \u043a\u043e\u0434\u0435 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u2014 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043e\u043f\u0438\u0441\u0430\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u0432 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u0435, \u0438 \u043e\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043f\u0440\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u0438.</p> <pre><code>@r.message(F.text == \"ping\")\nasync def ping_handler(message):\n    await message.answer(\"pong\")\n</code></pre> <p>\u0417\u0434\u0435\u0441\u044c \u0444\u0438\u043b\u044c\u0442\u0440 <code>F.text == \"ping\"</code> \u0431\u0443\u0434\u0435\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f. \u0415\u0441\u043b\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442, \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.</p>"},{"location":"ru/learn/filters/#_3","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b","text":"<p>\u041e\u0431\u044a\u0435\u043a\u0442 MagicFilter \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0431\u0430\u0437\u043e\u0432\u044b\u0435 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0430\u0434 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430\u043c\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u044f:</p> <pre><code>F.photo  # message.photo\n</code></pre> <p>\u0420\u0430\u0432\u0435\u043d\u0441\u0442\u0432\u043e:</p> <pre><code>F.text == \"hello\"        # message.text == \"hello\"\nF.from_user.id == 42     # message.from_user.id == 42\nF.text != \"spam\"         # message.text != \"spam\"\n</code></pre> <p>\u041f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u043d\u043e\u0441\u0442\u044c \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0443:</p> <pre><code># query.from_user.id in {42, 1000, 123123}\nF.from_user.id.in_({42, 1000, 123123})\n\n# query.data in {\"foo\", \"bar\", \"baz\"}\nF.data.in_({\"foo\", \"bar\", \"baz\"})       \n</code></pre> <p>\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442:</p> <pre><code>F.text.contains(\"foo\")  # \"foo\" in message.text\n</code></pre> <p>\u041d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f/\u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u043e\u043a\u043e\u0439:</p> <pre><code>F.text.startswith(\"foo\")  # message.text.startswith(\"foo\")\nF.text.endswith(\"bar\")    # message.text.endswith(\"bar\")\n</code></pre> <p>\u0420\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f:</p> <pre><code>F.text.regexp(r\"Hello, .+\")  # re.match(r\"Hello, .+\", message.text)\n</code></pre> <p>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f:</p> <pre><code># (lambda chat: chat.id == -42)(message.chat)\nF.chat.func(lambda chat: chat.id == -42)  \n</code></pre> <p>\u0418\u043d\u0432\u0435\u0440\u0441\u0438\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430:</p> <pre><code>~F.text                     # not message.text\n~F.text.startswith(\"spam\")  # not message.text.startswith(\"spam\")\n</code></pre> <p>\u041a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u0439:</p> <pre><code>(F.from_user.id == 42) &amp; (F.text == \"admin\")\n\nF.text.startswith(\"a\") | F.text.endswith(\"b\")\n\n(F.from_user.id.in_({42, 777, 911})) &amp; (F.text.startswith(\"!\") | F.text.startswith(\"/\")) &amp; F.text.contains(\"ban\")   \n</code></pre> <p>\u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u044b \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432 (\u0441\u0442\u0440\u043e\u043a\u0438):</p> <pre><code>F.text.lower() == \"test\"           # message.text.lower() == \"test\"\nF.text.upper().in_({\"FOO\", \"BAR\"}) # message.text.upper() in {\"FOO\", \"BAR\"}\nF.text.len() == 5                  # len(message.text) == 5\n</code></pre>"},{"location":"ru/learn/filters/#_4","title":"\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432","text":"<p>\u041a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 Command \u0438 MagicFilter \u2014 \u0447\u0430\u0441\u0442\u0430\u044f \u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0430: Command \u043f\u0430\u0440\u0441\u0438\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0438 \u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u0442 CommandObject, \u0430 <code>magic</code> \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043d\u0430\u043b\u043e\u0436\u0438\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043d\u0430 <code>args</code> \u0438\u043b\u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0447\u0430\u0441\u0442\u0438 CommandObject.</p> <p>\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u044b /echo \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b:</p> <pre><code>@r.message(Command(\"echo\", magic=F.args.is_not(None)))\nasync def handle_echo(message: Message, command: CommandObject):\n    await bot.send_message(chat_id=message.chat_id, text=command.args)\n</code></pre> <p>\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0434\u043b\u0438\u043d\u044b \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430:</p> <pre><code>@r.message(Command(\"upper\", magic=F.args.len() &gt; 3))\nasync def handle_upper(message: Message, command: CommandObject):\n    await bot.send_message(chat_id=message.chat_id, text=(command.args or \"\").upper())\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441 func \u2014 \u0435\u0434\u0438\u043d\u0438\u0447\u043d\u043e\u0435 \u0441\u043b\u043e\u0432\u043e:</p> <pre><code>@r.message(Command(\"repeat\", magic=F.args.func(lambda x: isinstance(x, str) and len(x.split()) == 1)))\nasync def handle_repeat(message: Message, command: CommandObject):\n    await bot.send_message(chat_id=message.chat_id, text=f\"{command.args} {command.args}\")\n</code></pre> <p>\u041a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 regexp \u0438 magic:</p> <pre><code>@r.message(Command(re.compile(r\"echo_\\\\d+\"), magic=F.args))\nasync def handle_special_echo(message: Message, command: CommandObject):\n    await bot.send_message(chat_id=message.chat_id, text=f\"Special: {command.command} -&gt; {command.args}\")\n</code></pre>"},{"location":"ru/learn/getting-started/","title":"\u041d\u0430\u0447\u0430\u043b\u043e \u0440\u0430\u0431\u043e\u0442\u044b","text":"<p>\u041f\u0435\u0440\u0435\u0434 \u043d\u0430\u0447\u0430\u043b\u043e\u043c \u0440\u0430\u0431\u043e\u0442\u044b \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0438 \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u043e\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0430:</p> <pre><code>python -m venv .venv\nsource .venv/bin/activate   # Linux / macOS\n.venv\\Scripts\\activate      # Windows PowerShell\n</code></pre>"},{"location":"ru/learn/getting-started/#python-trueconf-bot","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 python-trueconf-bot","text":"<p>\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 python-trueconf-bot, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443 \u0438\u0437 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f PyPI:</p> <pre><code>pip install python-trueconf-bot\n</code></pre> <p>Info</p> <p>\u041f\u043e\u0441\u043b\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0431\u0443\u0434\u0443\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u043e\u0434\u0442\u044f\u043d\u0443\u0442\u044b \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438: <code>websockets</code>, <code>httpx</code>, <code>mashumaro</code>, <code>pillow</code>, <code>aiofiles</code>, <code>magic-filter</code>.</p>"},{"location":"ru/learn/getting-started/#-","title":"\u041f\u0435\u0440\u0432\u043e\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0441\u0442\u043e\u0433\u043e \u044d\u0445\u043e-\u0431\u043e\u0442\u0430","text":"<p>\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u043d\u0443\u0436\u043d\u044b\u0435 \u043a\u043b\u0430\u0441\u0441\u044b:</p> <pre><code>from trueconf import Bot, Dispatcher, Router, F\nfrom trueconf.types import Message\n</code></pre> <p>\u0414\u0430\u043b\u0435\u0435 \u0441\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u044b Router \u0438 Dispatcher \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0438\u0445:</p> <pre><code>r = Router()\ndp = Dispatcher()\n# dp.include_router(r)\n</code></pre> <p>\u0411\u043e\u0442 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0434\u0432\u0430 \u0442\u0438\u043f\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438: \u043f\u043e \u0442\u043e\u043a\u0435\u043d\u0443 \u0438\u043b\u0438 \u043f\u043e \u043b\u043e\u0433\u0438\u043d\u0443 \u0438 \u043f\u0430\u0440\u043e\u043b\u044e. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0443\u0434\u043e\u0431\u043d\u044b\u0439 \u0441\u043f\u043e\u0441\u043e\u0431.</p>"},{"location":"ru/learn/getting-started/#_2","title":"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u043e \u0442\u043e\u043a\u0435\u043d\u0443","text":"<p>\u0415\u0441\u043b\u0438 \u0432\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0442\u043e\u043a\u0435\u043d\u0443, \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0435\u0433\u043e, \u043a\u0430\u043a \u043e\u043f\u0438\u0441\u0430\u043d\u043e \u0432 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 API.</p> <p>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f \u0438\u043b\u0438 \u0432 .env-\u0444\u0430\u0439\u043b\u0435. \u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c .env \u0432 .gitignore, \u0435\u0441\u043b\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\u0435 \u0441 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u043c\u0438 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\u043c\u0438.</p> <pre><code>from os import getenv\n\nTOKEN = getenv(\"TOKEN\")\nbot = Bot(server=\"video.example.com\", token=TOKEN, dispatcher=dp)\n</code></pre>"},{"location":"ru/learn/getting-started/#_3","title":"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u043e \u043b\u043e\u0433\u0438\u043d\u0443 \u0438 \u043f\u0430\u0440\u043e\u043b\u044e","text":"<p>\u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043c\u0435\u0442\u043e\u0434 <code>.from_credentials</code>:</p> <pre><code>bot = Bot.from_credentials(\n    username=\"echo_bot\",\n    password=\"123tr\",\n    server=\"10.110.2.240\",\n    dispatcher=dp\n)\n</code></pre> <p>Info</p> <p>\u041f\u0440\u0438 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u044b\u0437\u043e\u0432\u0435 from_credentials() \u0431\u043e\u0442 \u043e\u0431\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0437\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435\u043c \u043d\u043e\u0432\u043e\u0433\u043e \u0442\u043e\u043a\u0435\u043d\u0430. \u0421\u0440\u043e\u043a \u0436\u0438\u0437\u043d\u0438 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0442\u043e\u043a\u0435\u043d\u0430 \u2014 1 \u043c\u0435\u0441\u044f\u0446.</p>"},{"location":"ru/learn/getting-started/#_4","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439","text":"<p>\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043f\u0440\u043e\u0441\u0442\u0443\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u044e-\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439. \u041e\u043d\u0430 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u0432\u0435\u0447\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u0442\u0435\u043c \u0436\u0435 \u0442\u0435\u043a\u0441\u0442\u043e\u043c (\u043a\u043b\u0430\u0441\u0441\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u00ab\u044d\u0445\u043e-\u0431\u043e\u0442\u00bb):</p> <pre><code>@r.message(F.text)\nasync def echo(message: Message):\n    await message.answer(message.text)\n</code></pre>"},{"location":"ru/learn/getting-started/#_5","title":"\u0417\u0430\u043f\u0443\u0441\u043a \u0431\u043e\u0442\u0430","text":"<p>\u0417\u0430\u043f\u0443\u0441\u043a \u0431\u043e\u0442\u0430 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0432\u043d\u0443\u0442\u0440\u0438 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 main, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043f\u0435\u0440\u0435\u0434\u0430\u0451\u0442\u0441\u044f \u0432 asyncio.run():</p> <pre><code>async def main():\n    await bot.run()\n\nimport asyncio\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre> <p>\u041f\u043e\u0447\u0435\u043c\u0443 async/await?</p> <p>\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 python-trueconf-bot \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0430 \u043d\u0430 asyncio.</p> <p>\u042d\u0442\u043e \u0437\u043d\u0430\u0447\u0438\u0442, \u0447\u0442\u043e \u0432\u0441\u0435 \u0441\u0435\u0442\u0435\u0432\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 (\u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443, \u043f\u0440\u0438\u0451\u043c \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439) \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e \u2014 \u043d\u0435 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u044f \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043f\u043e\u0442\u043e\u043a. \u041f\u043e\u044d\u0442\u043e\u043c\u0443:</p> <ul> <li>\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u043f\u0438\u0448\u0443\u0442\u0441\u044f \u043a\u0430\u043a <code>async def</code>,</li> <li>\u0434\u043b\u044f \u0432\u044b\u0437\u043e\u0432\u043e\u0432 \u043c\u0435\u0442\u043e\u0434\u043e\u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f <code>await</code>,  </li> <li>\u0437\u0430\u043f\u0443\u0441\u043a \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0443\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 <code>asyncio.run(...)</code>.  </li> </ul> <p>\u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0441\u0440\u0430\u0437\u0443 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e, \u0431\u0435\u0437 \u0437\u0430\u0434\u0435\u0440\u0436\u0435\u043a \u0438 \u043f\u043e\u0434\u0432\u0438\u0441\u0430\u043d\u0438\u0439.</p>"},{"location":"ru/learn/parse-messages/","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432","text":""},{"location":"ru/learn/parse-messages/#_2","title":"\u0420\u043e\u0443\u0442\u0435\u0440","text":"<p>\u041f\u0440\u0438 \u043b\u044e\u0431\u043e\u043c \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0438 \u0441 \u0431\u043e\u0442\u043e\u043c \u2014 \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0440\u0438 \u043b\u0438\u0447\u043d\u043e\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0432 \u0433\u0440\u0443\u043f\u043f\u043e\u0432\u043e\u0439 \u0447\u0430\u0442 \u0438\u043b\u0438 \u043a\u0430\u043d\u0430\u043b \u2014 \u0431\u043e\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 (update) \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430.</p> <p>\u0414\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u044d\u0442\u0438\u0445 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f <code>Router</code>. \u041e\u043d \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442, \u043a\u0430\u043a\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043d\u0443\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0442\u0438\u043f\u0430 \u0430\u043f\u0434\u0435\u0439\u0442\u0430. \u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0446\u0435\u043d\u0442\u0440\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043b\u043e\u0433\u0438\u043a\u043e\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439:</p> <pre><code>from trueconf import Router\n\nr = Router()\n</code></pre> <p>\u0427\u0442\u043e\u0431\u044b \u043e\u0442\u043b\u043e\u0432\u0438\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441 \u043c\u0435\u0442\u043e\u0434\u043e\u043c <code>SendMessage</code>, \u0444\u0443\u043d\u043a\u0446\u0438\u044e-\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u043e\u0431\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u044e\u0442 \u0432 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440:</p> <pre><code>@r.message()\nasync def on_message(message): ...\n</code></pre>"},{"location":"ru/learn/parse-messages/#_3","title":"\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432","text":"<p>\u0420\u043e\u0443\u0442\u0435\u0440\u044b \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 magic-filter. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043e\u0431\u044a\u0435\u043a\u0442 <code>F</code>:</p> <pre><code>from trueconf import F\n</code></pre> <p>\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435 \u0430\u043f\u0434\u0435\u0439\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code># \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u0442\u0435\u043a\u0441\u0442\u043e\u043c\n@r.message(F.text)\nasync def on_message(message): ...\n\n# \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c\u0438\n@r.message(F.photo)\nasync def on_photo(message): ...\n\n# \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\n@r.message(F.from_user.id == \"elisa\")\nasync def on_elisa(message): ...\n</code></pre> <p>Tip</p> <p>\u0411\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u0439\u0442\u0438 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0424\u0438\u043b\u044c\u0442\u0440\u044b.</p>"},{"location":"ru/learn/parse-messages/#_4","title":"\u0414\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440","text":"<p>\u0412\u0441\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u0440\u043e\u0443\u0442\u0435\u0440\u044b \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440 (Dispatcher). \u0418\u043c\u0435\u043d\u043d\u043e \u043e\u043d \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u0435\u0439 \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432:</p> <pre><code>from trueconf import Dispatcher\n\ndp = Dispatcher()\ndp.include_router(r)\n</code></pre>"},{"location":"ru/learn/parse-messages/#_5","title":"\u041f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u044b \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432","text":"<ul> <li>\u0420\u043e\u0443\u0442\u0435\u0440\u044b \u0438 \u0438\u0445 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u044e\u0442\u0441\u044f \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0447\u0435\u0440\u0435\u0437 Dispatcher.include_router().</li> <li>\u0412\u043d\u0443\u0442\u0440\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0440\u043e\u0443\u0442\u0435\u0440\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u0442\u0430\u043a\u0436\u0435 \u0438\u0434\u0443\u0442 \u043f\u043e \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f.</li> <li>\u041f\u0440\u0438 \u043f\u0435\u0440\u0432\u043e\u043c \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f, \u0438 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0438\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f \u043d\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u044e\u0442\u0441\u044f (\u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e).</li> </ul> <p>\u042d\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u0435\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 \u0441 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u043c\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c\u0438:</p> <pre><code>@r.message(F.text == \"Hello\")\nasync def handler1(message):\n    await message.answer(\"\u041f\u0435\u0440\u0432\u044b\u0439\")\n\n@r.message(F.text == \"Hello\")\nasync def handler2(message):\n    await message.answer(\"\u0412\u0442\u043e\u0440\u043e\u0439\")\n</code></pre> <p>\u0422\u043e \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e handler1, \u0430 \u0434\u043e handler2 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0443\u0436\u0435 \u043d\u0435 \u0434\u043e\u0439\u0434\u0451\u0442.</p> <p>\u0427\u0442\u043e\u0431\u044b \u0437\u0430\u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0440\u0430\u0437\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u0438\u043b\u0438 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u0435 \u0438\u0445 \u0432 \u043e\u0434\u0438\u043d \u0441 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043b\u043e\u0433\u0438\u043a\u043e\u0439 \u0432\u043d\u0443\u0442\u0440\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438.</p> <p>Tip</p> <p>\u0414\u043b\u044f \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043b\u043e\u0433\u0438\u043a\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u043e\u0443\u0442\u0435\u0440\u043e\u0432 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, commands_router, messages_router, admin_router) \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0438\u0445 \u0432 \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440\u0435 \u0432 \u043d\u0443\u0436\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435. \u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u0434 \u0438 \u0443\u043f\u0440\u043e\u0449\u0430\u0435\u0442 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443 \u0431\u043e\u0442\u0430.</p>"},{"location":"ru/learn/parse-messages/#_6","title":"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u043a\u043e\u0434\u0430","text":"<ul> <li>\u041e\u0431\u044b\u0447\u043d\u043e \u0440\u043e\u0443\u0442\u0435\u0440\u044b \u0432\u044b\u043d\u043e\u0441\u044f\u0442 \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u043e\u0434\u0443\u043b\u0438 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, handlers/messages.py), \u0430 \u0437\u0430\u0442\u0435\u043c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u044e\u0442 \u0438\u0445 \u0432 \u0433\u043b\u0430\u0432\u043d\u043e\u043c \u043c\u043e\u0434\u0443\u043b\u0435 \u0431\u043e\u0442\u0430 \u0447\u0435\u0440\u0435\u0437 include_router.</li> <li>\u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0440\u0430\u0437\u0434\u0435\u043b\u044f\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u043f\u043e \u043e\u0431\u043b\u0430\u0441\u0442\u044f\u043c \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u0438: \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u0444\u043e\u0442\u043e, \u043a\u043e\u043c\u0430\u043d\u0434\u044b\u0430 \u0438 \u0442. \u0434.</li> <li>\u0414\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440 (Dispatcher) \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u043a\u0430\u043a \u0446\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u044b\u0439 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0438\u0439 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442, \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u044e\u0449\u0438\u0439 \u043b\u043e\u0433\u0438\u043a\u0443 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0432\u0441\u0435\u0445 \u0441\u043e\u0431\u044b\u0442\u0438\u0439.</li> </ul>"},{"location":"ru/learn/types/","title":"\u0422\u0438\u043f\u044b \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u041f\u0440\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u0432\u0430\u0436\u043d\u043e, \u0447\u0442\u043e\u0431\u044b \u0441\u0440\u0435\u0434\u0430 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 (IDE) \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u043b\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u043c\u0435\u0442\u043e\u0434\u044b \u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u043b\u0430\u0441\u0441\u043e\u0432. \u041e\u0434\u043d\u0430\u043a\u043e \u0440\u043e\u0443\u0442\u0435\u0440 (Router) \u043f\u0435\u0440\u0435\u0434\u0430\u0451\u0442 \u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u0440\u0430\u0437\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u0434\u0430\u043d\u043d\u044b\u0445, \u0438 IDE \u043d\u0435 \u0432\u0441\u0435\u0433\u0434\u0430 \u043c\u043e\u0436\u0435\u0442 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0438\u0445 \u0442\u0438\u043f. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0435\u0439 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u00ab\u043f\u043e\u0434\u0441\u043a\u0430\u0437\u0430\u0442\u044c\u00bb, \u043a\u0430\u043a\u043e\u0439 \u0438\u043c\u0435\u043d\u043d\u043e \u043e\u0431\u044a\u0435\u043a\u0442 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442.</p> <p>\u0412 python-trueconf-bot \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d \u043f\u0430\u043a\u0435\u0442 <code>trueconf.types</code>, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043e\u043f\u0438\u0441\u0430\u043d\u044b \u0432\u0441\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u044b (\u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f). \u0410 \u0434\u043b\u044f \u043e\u0442\u0432\u0435\u0442\u043e\u0432 \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u043e\u0434\u0443\u043b\u044c \u2014 <code>trueconf.types.responses</code>.</p> <p>\u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c:</p> <ul> <li>\u043f\u0440\u0438 \u0440\u0430\u0431\u043e\u0442\u0435 \u0441 \u0441\u043e\u0431\u044b\u0442\u0438\u044f\u043c\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0442\u0438\u043f\u044b \u0438\u0437 <code>trueconf.types</code>;</li> <li>\u043f\u0440\u0438 \u0440\u0430\u0431\u043e\u0442\u0435 \u0441 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u043c\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0442\u0438\u043f\u044b \u0438\u0437 <code>trueconf.types.responses</code>.</li> </ul> <p>\u042d\u0442\u043e \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442:</p> <ul> <li>\u0430\u0432\u0442\u043e\u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0432 IDE (\u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0438 \u043f\u043e \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430\u043c \u0438 \u043c\u0435\u0442\u043e\u0434\u0430\u043c);</li> <li>\u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u0442\u0438\u043f\u043e\u0432 (type checking) \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e mypy \u0438\u043b\u0438 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u0445 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432;</li> <li>\u0431\u043e\u043b\u0435\u0435 \u0443\u0434\u043e\u0431\u043d\u0443\u044e \u043d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044e \u043f\u043e \u043a\u043e\u0434\u0443 \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438.</li> </ul>"},{"location":"ru/learn/types/#_2","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"ru/learn/types/#_3","title":"\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430 \u0432 \u0447\u0430\u0442","text":"<p>\u041f\u0440\u0435\u0434\u043f\u043e\u043b\u043e\u0436\u0438\u043c, \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043d\u043e\u0432\u043e\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430 \u0432 \u0447\u0430\u0442 (1): </p> <ol> <li>\u0421\u043e\u0433\u043b\u0430\u0441\u043d\u043e API, \u044d\u0442\u043e \u0437\u0430\u043f\u0440\u043e\u0441 \u0441 <code>\"method\": \"addChatParticipant\"</code>.</li> </ol> <pre><code>from trueconf import Router\n\nr = Router()\n\n@r.added_chat_participant()\nasync def on_added_user(event): ...\n</code></pre> <p>\u0427\u0442\u043e\u0431\u044b IDE \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u043b\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u043e\u0431\u044a\u0435\u043a\u0442\u0430 event, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0442\u0438\u043f \u0434\u0430\u043d\u043d\u044b\u0445:</p> <pre><code>from trueconf import Router\nfrom trueconf.types import AddedChatParticipant\n\nr = Router()\n\n@r.added_chat_participant()\nasync def on_added_user(event: AddedChatParticipant):\n    who_add = event.added_by\n</code></pre> <p>\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435:</p> <ul> <li><code>AddedChatParticipant</code> \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0432\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044f,</li> <li>\u0432\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0435 \u0443\u0434\u043e\u0431\u043d\u043e\u0435 \u0430\u0432\u0442\u043e\u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0432 IDE,</li> <li>\u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u0438 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, mypy) \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442\u0441\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043a \u043f\u043e\u043b\u044f\u043c \u043e\u0431\u044a\u0435\u043a\u0442\u0430.</li> </ul>"},{"location":"ru/learn/types/#_4","title":"\"\u0421\u044b\u0440\u043e\u0435\" \u0441\u043e\u0431\u044b\u0442\u0438\u0435","text":"<p>\u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u0430 @.event \u0432\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0435 \u0434\u043e\u0441\u0442\u0443\u043f \u043a\u043e \u0432\u0441\u0435\u043c \u043f\u043e\u043b\u044f\u043c \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0442\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043a\u0440\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043f\u0440\u0438 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0438 JSON \u0432 \u043a\u043b\u0430\u0441\u0441: <p><pre><code>{\n  \"method\": \"name\",\n  \"type\": 1,\n  \"id\": 11,\n  \"payload\": {}\n}\n</code></pre> \u0412 \u0442\u0430\u043a\u043e\u0439 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438 \u043b\u0443\u0447\u0448\u0435 \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a <code>trueconf.types.Update</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u043f\u043e\u043b\u043d\u043e\u0433\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f, \u043f\u0440\u0438\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430.</p> <pre><code>from trueconf import Router\nfrom trueconf.types import Update\nfrom trueconf.enums import IncomingUpdateMethod\n\nr = Router()\n\n@r.event()\nasync def raw_event(event: Update):\n    if event.method == IncomingUpdateMethod.MESSAGE:\n        pass\n\n    # Alternatively, without importing enum\n    if event.method == \"SendMessage\":\n        pass\n</code></pre>"}]}